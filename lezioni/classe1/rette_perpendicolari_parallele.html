<!doctype html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Geometria Euclidea â€” Parallele & Perpendicolari</title>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,700;0,900;1,300&family=DM+Mono:wght@400;500&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0c0c14;
      --surface: #13131f;
      --surface2: #1a1a2e;
      --border: rgba(255,255,255,0.07);
      --text: #e4e2f0;
      --muted: #9895b5;
      --pri: #7c6af7;
      --pri-glow: rgba(124,106,247,0.25);
      --sec: #2dd4a4;
      --sec-glow: rgba(45,212,164,0.2);
      --amber: #f5c842;
      --red: #f06080;
      --blue: #4fa3f7;
      --radius: 16px;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* â”€â”€ BACKGROUND DECORATION â”€â”€ */
    body::before {
      content: '';
      position: fixed;
      top: -200px; right: -200px;
      width: 600px; height: 600px;
      background: radial-gradient(circle, rgba(124,106,247,0.08) 0%, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }
    body::after {
      content: '';
      position: fixed;
      bottom: -150px; left: -150px;
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(45,212,164,0.06) 0%, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }

    /* â”€â”€ HEADER â”€â”€ */
    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(12,12,20,0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
    }

    .hdr-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.9rem 1.2rem 0.6rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .brand-icon {
      width: 34px; height: 34px;
      background: linear-gradient(135deg, var(--pri), var(--sec));
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }

    .brand-text {
      font-family: 'Fraunces', serif;
      font-weight: 700;
      font-size: 1.05rem;
      line-height: 1.1;
      color: #fff;
    }

    .brand-sub {
      font-size: 0.68rem;
      color: var(--muted);
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-weight: 400;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .fs-btn {
      background: transparent;
      border: 1.5px solid var(--border);
      color: var(--muted);
      padding: 0.35rem 0.7rem;
      border-radius: 8px;
      font-size: 0.78rem;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    .fs-btn:hover { border-color: var(--pri); color: var(--pri); }

    /* â”€â”€ TAB NAV â”€â”€ */
    .tab-nav {
      display: flex;
      gap: 0.3rem;
      overflow-x: auto;
      padding: 0.5rem 1rem 0.6rem;
      scrollbar-width: none;
    }
    .tab-nav::-webkit-scrollbar { display: none; }

    .tab {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.42rem 0.85rem;
      white-space: nowrap;
      border-radius: 999px;
      border: 1.5px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-size: 0.8rem;
      font-weight: 600;
      font-family: 'Plus Jakarta Sans', sans-serif;
      cursor: pointer;
      transition: all 0.2s;
      flex-shrink: 0;
    }

    .tab:hover { border-color: rgba(124,106,247,0.4); color: var(--text); }
    .tab.active {
      background: var(--pri);
      border-color: var(--pri);
      color: #fff;
      box-shadow: 0 0 16px var(--pri-glow);
    }

    /* â”€â”€ MAIN â”€â”€ */
    main {
      position: relative;
      z-index: 1;
      padding: 1.2rem 1rem;
      max-width: 900px;
      margin: 0 auto;
    }

    section { display: none; }
    section.active { display: block; }

    /* â”€â”€ CARDS â”€â”€ */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.2rem;
      margin-bottom: 1rem;
    }

    .card-inner {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 0.8rem;
    }

    /* â”€â”€ SECTION TITLE â”€â”€ */
    .sec-title {
      font-family: 'Fraunces', serif;
      font-size: 1.55rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 0.3rem;
      line-height: 1.2;
    }
    .sec-title span { color: var(--pri); }

    .sec-num {
      display: inline-block;
      font-family: 'DM Mono', monospace;
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      color: var(--pri);
      background: var(--pri-glow);
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      margin-bottom: 0.6rem;
    }

    /* â”€â”€ DEFINITION BOXES â”€â”€ */
    .def-box {
      border-radius: 12px;
      padding: 1rem 1.2rem;
      margin: 0.8rem 0 1rem;
      position: relative;
      overflow: hidden;
    }

    .def-box::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 3px;
      border-radius: 3px;
    }

    .def-box.pri {
      background: linear-gradient(135deg, rgba(124,106,247,0.12), rgba(124,106,247,0.04));
    }
    .def-box.pri::before { background: var(--pri); }

    .def-box.sec {
      background: linear-gradient(135deg, rgba(45,212,164,0.12), rgba(45,212,164,0.04));
    }
    .def-box.sec::before { background: var(--sec); }

    .def-box.amber {
      background: linear-gradient(135deg, rgba(245,200,66,0.12), rgba(245,200,66,0.04));
    }
    .def-box.amber::before { background: var(--amber); }

    .def-label {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--pri);
      margin-bottom: 0.4rem;
    }

    .def-box.sec .def-label { color: var(--sec); }
    .def-box.amber .def-label { color: var(--amber); }

    .def-box p { color: var(--text); line-height: 1.6; font-size: 0.95rem; }
    .def-box strong { color: #fff; }

    /* â”€â”€ GRID â”€â”€ */
    .row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    @media(min-width: 640px) {
      .row { grid-template-columns: 1fr 1fr; }
    }

    /* â”€â”€ SVG CANVAS â”€â”€ */
    .canvas {
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.8rem;
    }

    .canvas-title {
      text-align: center;
      font-size: 0.78rem;
      font-weight: 700;
      color: var(--muted);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }

    svg { max-width: 100%; height: auto; display: block; }

    /* â”€â”€ BUTTONS â”€â”€ */
    .btn-row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 0.8rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      border-radius: 999px;
      padding: 0.45rem 1rem;
      font-size: 0.82rem;
      font-weight: 600;
      font-family: 'Plus Jakarta Sans', sans-serif;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
    }

    .btn-primary {
      background: var(--pri);
      color: #fff;
      box-shadow: 0 4px 14px var(--pri-glow);
    }
    .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 6px 18px var(--pri-glow); }

    .btn-sec {
      background: transparent;
      color: var(--sec);
      border: 1.5px solid var(--sec);
    }
    .btn-sec:hover { background: var(--sec-glow); }

    .btn-ghost {
      background: var(--surface2);
      color: var(--muted);
      border: 1.5px solid var(--border);
    }
    .btn-ghost:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }

    .btn-angle {
      background: var(--surface2);
      border: 1.5px solid var(--border);
      color: var(--text);
      font-size: 0.78rem;
      padding: 0.4rem 0.8rem;
      border-radius: 999px;
      cursor: pointer;
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-angle:hover { border-color: var(--pri); color: var(--pri); }

    /* â”€â”€ STEP TEXT â”€â”€ */
    .step-text {
      text-align: center;
      font-family: 'DM Mono', monospace;
      font-size: 0.8rem;
      color: var(--sec);
      min-height: 1.2em;
      margin-top: 0.5rem;
    }

    /* â”€â”€ EXAMPLES GRID â”€â”€ */
    .example-item {
      display: flex;
      align-items: flex-start;
      gap: 0.6rem;
      padding: 0.7rem 0.9rem;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--surface2);
      margin-bottom: 0.5rem;
    }

    .example-icon { font-size: 1.2rem; flex-shrink: 0; }
    .example-text { font-size: 0.87rem; line-height: 1.4; }
    .example-text strong { color: #fff; display: block; font-size: 0.9rem; margin-bottom: 0.1rem; }

    /* â”€â”€ LIST â”€â”€ */
    ol.steps { padding-left: 1.4rem; }
    ol.steps li {
      font-size: 0.9rem;
      line-height: 1.6;
      color: var(--text);
      margin-bottom: 0.4rem;
      padding-left: 0.3rem;
    }
    ol.steps strong { color: #fff; }

    ul.bullets { padding-left: 1.2rem; }
    ul.bullets li {
      font-size: 0.9rem;
      line-height: 1.6;
      margin-bottom: 0.3rem;
    }

    /* â”€â”€ FORMULA â”€â”€ */
    .formula {
      font-family: 'DM Mono', monospace;
      font-size: 1.3rem;
      font-weight: 500;
      color: var(--pri);
      text-align: center;
      background: var(--pri-glow);
      border-radius: 10px;
      padding: 0.7rem 1rem;
      margin: 0.8rem 0;
      letter-spacing: 0.04em;
    }

    /* â”€â”€ BADGE â”€â”€ */
    .badge {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      margin-right: 0.4rem;
    }
    .badge-pri { background: var(--pri-glow); color: var(--pri); }
    .badge-sec { background: var(--sec-glow); color: var(--sec); }

    /* â”€â”€ EXERCISES â”€â”€ */
    .ex-card {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.1rem;
      margin-bottom: 1rem;
    }

    .ex-title {
      font-size: 0.95rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 0.8rem;
    }

    .choices {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin: 0.7rem 0;
    }

    .choices label {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.87rem;
      cursor: pointer;
      padding: 0.35rem 0.8rem;
      border-radius: 999px;
      border: 1.5px solid var(--border);
      background: var(--surface);
      transition: all 0.2s;
    }
    .choices label:hover { border-color: var(--pri); }
    .choices input { accent-color: var(--pri); }

    .result {
      font-family: 'DM Mono', monospace;
      font-size: 0.85rem;
      margin-top: 0.5rem;
      min-height: 1.2em;
    }
    .result.ok { color: var(--sec); }
    .result.err { color: var(--red); }

    .sol-box {
      display: none;
      margin-top: 0.6rem;
      padding: 0.7rem 1rem;
      background: rgba(45,212,164,0.08);
      border: 1px solid rgba(45,212,164,0.2);
      border-radius: 10px;
      font-size: 0.87rem;
      color: var(--text);
    }
    .sol-box strong { color: var(--sec); }

    /* â”€â”€ NON-EUCLIDEAN INFO â”€â”€ */
    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.6rem;
      margin-top: 0.6rem;
    }
    .info-item {
      padding: 0.7rem;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--surface2);
      font-size: 0.82rem;
    }
    .info-item strong { display: block; margin-bottom: 0.2rem; font-size: 0.85rem; }

    /* â”€â”€ PROGRESS INDICATOR â”€â”€ */
    .progress-bar {
      height: 2px;
      background: var(--border);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 0.4rem;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--pri), var(--sec));
      transition: width 0.4s ease;
    }

    /* â”€â”€ FOOTER â”€â”€ */
    footer {
      text-align: center;
      padding: 2rem 1rem 3rem;
      color: var(--muted);
      font-size: 0.8rem;
      position: relative;
      z-index: 1;
    }

    /* â”€â”€ ANIMATIONS â”€â”€ */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(14px); }
      to { opacity: 1; transform: translateY(0); }
    }

    section.active > * {
      animation: fadeInUp 0.35s ease both;
    }
    section.active > *:nth-child(2) { animation-delay: 0.06s; }
    section.active > *:nth-child(3) { animation-delay: 0.12s; }
    section.active > *:nth-child(4) { animation-delay: 0.18s; }

    /* â”€â”€ HIGHLIGHT â”€â”€ */
    .hl { color: var(--pri); font-weight: 700; }
    .hl-g { color: var(--sec); font-weight: 700; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE â€” MOBILE / TABLET / DESKTOP OPTIMIZATIONS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    /* â”€â”€ Touch targets: buttons big enough on mobile â”€â”€ */
    @media (pointer: coarse) {
      .btn, .tab, .fs-btn, .btn-angle {
        min-height: 44px;
        min-width: 44px;
      }
      .tab { padding: 0.55rem 1rem; }
      .btn { padding: 0.6rem 1.2rem; }
      input[type="number"], select {
        min-height: 44px;
        font-size: 1rem !important;
      }
      .choices label { padding: 0.55rem 1rem; min-height: 44px; }
    }

    /* â”€â”€ Small mobile (< 480px) â”€â”€ */
    @media (max-width: 480px) {
      :root { --radius: 12px; }

      .sec-title { font-size: 1.25rem; }
      .hdr-top { padding: 0.65rem 0.85rem 0.5rem; gap: 0.5rem; }
      .brand-text { font-size: 0.88rem; }
      .brand-sub { display: none; }
      .fs-btn { font-size: 0.72rem; padding: 0.3rem 0.55rem; }
      .tab-nav { padding: 0.4rem 0.6rem 0.5rem; gap: 0.25rem; }
      .tab { font-size: 0.74rem; padding: 0.4rem 0.7rem; }
      main { padding: 0.85rem 0.65rem; }
      .card { padding: 1rem 0.9rem; }
      .card-inner { padding: 0.8rem; }
      .def-box { padding: 0.85rem 1rem; }
      .def-box p { font-size: 0.9rem; }
      .formula { font-size: 1.1rem; }

      /* Stack btn-row vertically on very small screens */
      .btn-row { flex-direction: column; align-items: flex-start; gap: 0.4rem; }
      .btn-row .btn { width: 100%; justify-content: center; }

      /* Full-width SVG containers */
      .canvas { padding: 0.6rem; }

      /* Exercise inputs */
      .ex-card { padding: 0.85rem 0.9rem; }
      .choices { gap: 0.4rem; }

      /* Order-steps exercise: wider buttons */
      #order-steps button { width: 100%; }

      /* Match area: stack select below definition */
      #match-area > div { flex-direction: column !important; gap: 0.5rem !important; }
      #match-area select { width: 100% !important; }

      /* TF questions: slightly smaller */
      #tf-questions > div { padding: 0.55rem 0.7rem; }
    }

    /* â”€â”€ Medium mobile / phablet (481â€“639px) â”€â”€ */
    @media (min-width: 481px) and (max-width: 639px) {
      main { padding: 1rem 0.85rem; }
      .sec-title { font-size: 1.35rem; }
      .btn-row { flex-wrap: wrap; }
    }

    /* â”€â”€ Tablet portrait (640â€“899px) â”€â”€ */
    @media (min-width: 640px) and (max-width: 899px) {
      main { padding: 1.2rem 1.2rem; max-width: 100%; }
      .hdr-top { padding: 0.9rem 1.4rem 0.6rem; }
      .tab-nav { padding: 0.5rem 1.2rem 0.6rem; }
      .sec-title { font-size: 1.45rem; }
      .row { grid-template-columns: 1fr 1fr; }

      /* Slightly bigger interactive targets for tablet */
      .btn { padding: 0.5rem 1.1rem; }
    }

    /* â”€â”€ Desktop (â‰¥ 900px) â”€â”€ */
    @media (min-width: 900px) {
      main {
        padding: 1.5rem 2rem;
        max-width: 960px;
      }
      .hdr-top { padding: 1rem 2rem 0.7rem; }
      .tab-nav { padding: 0.5rem 1.8rem 0.65rem; }
      .card { padding: 1.5rem; }
      .sec-title { font-size: 1.65rem; }

      /* Hover improvements only on non-touch */
      .tab:hover { background: rgba(124,106,247,0.08); }
      .btn-angle:hover { background: rgba(124,106,247,0.12); }
    }

    /* â”€â”€ Wide desktop (â‰¥ 1200px) â”€â”€ */
    @media (min-width: 1200px) {
      main { max-width: 1040px; padding: 1.8rem 0; }
      .card { padding: 1.8rem; }
    }

    /* â”€â”€ SVG: always fluid â”€â”€ */
    svg { max-width: 100%; height: auto; display: block; }

    /* â”€â”€ Landscape phone: taller SVG containers â”€â”€ */
    @media (max-width: 900px) and (orientation: landscape) and (max-height: 500px) {
      header { position: relative; }
      .hdr-top { padding: 0.5rem 1rem 0.3rem; }
      .tab-nav { padding: 0.3rem 0.8rem 0.4rem; }
      main { padding: 0.8rem; }
      .sec-title { font-size: 1.2rem; }
      .card { padding: 0.9rem; margin-bottom: 0.7rem; }
    }

    /* â”€â”€ Print / high contrast accessibility â”€â”€ */
    @media (prefers-contrast: high) {
      :root {
        --border: rgba(255,255,255,0.25);
        --muted: #c0bdd8;
      }
    }

    /* â”€â”€ Reduce motion for accessibility â”€â”€ */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* â”€â”€ Scrollbar styling for tab-nav (desktop) â”€â”€ */
    @media (min-width: 900px) {
      .tab-nav {
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
      }
      .tab-nav::-webkit-scrollbar { height: 3px; display: block; }
      .tab-nav::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    }

    /* â”€â”€ Inputs: consistent across devices â”€â”€ */
    input[type="number"] {
      -moz-appearance: textfield;
      appearance: textfield;
      background: var(--surface2);
      border: 1.5px solid var(--border);
      color: var(--text);
      border-radius: 8px;
      padding: 0.4rem 0.6rem;
      font-family: 'DM Mono', monospace;
      font-size: 0.9rem;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }
    input[type="number"]:focus { outline: none; border-color: var(--pri); }

    /* â”€â”€ Select: consistent styling â”€â”€ */
    select {
      background: var(--surface2);
      border: 1.5px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 0.85rem;
      padding: 0.4rem 0.6rem;
      cursor: pointer;
    }
    select:focus { outline: none; border-color: var(--pri); }

    /* â”€â”€ Score bar container: wrap gracefully â”€â”€ */
    #ex-score-row {
      flex-wrap: wrap;
      gap: 0.5rem;
    }
  </style>
</head>
<body>

<header>
  <div class="hdr-top">
    <div class="brand">
      <div class="brand-icon">ğŸ“</div>
      <div>
        <div class="brand-text">Geometria Euclidea</div>
        <div class="brand-sub">Interattiva â€” Classe prima</div>
      </div>
    </div>
    <button class="fs-btn" id="fullscreen-btn">â›¶ Schermo intero</button>
  </div>
  <nav class="tab-nav" id="top-menu">
    <button class="tab active" data-section="perp">ğŸ“ Perpendicolari</button>
    <button class="tab" data-section="costruzione-perp">ğŸ”§ Costruzione âŸ‚</button>
    <button class="tab" data-section="parallele">â†” Parallele</button>
    <button class="tab" data-section="costruzione-par">ğŸ”§ Costruzione âˆ¥</button>
    <button class="tab" data-section="postulato">ğŸ“œ V Postulato</button>
    <button class="tab" data-section="trasversale">âœ‚ï¸ Trasversale</button>
    <button class="tab" data-section="triangoli">ğŸ”º Triangoli</button>
    <button class="tab" data-section="esercizi">ğŸ§  Esercizi</button>
  </nav>
</header>

<main>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 1  PERPENDICOLARI           -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="perp" class="active">
    <div class="card">
      <div class="sec-num">01 â€” Definizione</div>
      <h2 class="sec-title">Rette <span>Perpendicolari</span></h2>

      <div class="def-box pri">
        <div class="def-label">Definizione</div>
        <p>Due rette incidenti si dicono <strong>perpendicolari</strong> se, incontrandosi, formano <strong>quattro angoli retti</strong>. Si scrive <strong>r  âŸ‚  s</strong>.</p>
      </div>

      <div class="row">
        <div class="canvas">
          <div class="canvas-title">Rappresentazione grafica</div>
          <svg viewBox="0 0 300 300" overflow="visible">
            <!-- Quadranti colorati (sfondo leggero) -->
            <rect x="150" y="30" width="120" height="120" fill="rgba(124,106,247,0.06)" rx="2"/>
            <rect x="30" y="30" width="120" height="120" fill="rgba(45,212,164,0.04)" rx="2"/>
            <rect x="30" y="150" width="120" height="120" fill="rgba(124,106,247,0.04)" rx="2"/>
            <rect x="150" y="150" width="120" height="120" fill="rgba(45,212,164,0.06)" rx="2"/>

            <!-- Retta orizzontale r, senza frecce -->
            <line x1="30" y1="150" x2="270" y2="150" stroke="#7c6af7" stroke-width="2.5"/>

            <!-- Retta verticale s, senza frecce -->
            <line x1="150" y1="30" x2="150" y2="270" stroke="#2dd4a4" stroke-width="2.5"/>

            <!-- Quadratino dell'angolo retto (16Ã—16) -->
            <rect x="150" y="134" width="16" height="16" fill="rgba(255,255,255,0.08)" stroke="#e4e2f0" stroke-width="1.5"/>

            <!-- Etichette angoli nei 4 quadranti -->
            <text x="174" y="128" fill="#e4e2f0" font-size="11" font-family="DM Mono" opacity="0.85" text-anchor="start">90Â°</text>
            <text x="174" y="176" fill="#e4e2f0" font-size="11" font-family="DM Mono" opacity="0.85" text-anchor="start">90Â°</text>
            <text x="126" y="128" fill="#e4e2f0" font-size="11" font-family="DM Mono" opacity="0.85" text-anchor="end">90Â°</text>
            <text x="126" y="176" fill="#e4e2f0" font-size="11" font-family="DM Mono" opacity="0.85" text-anchor="end">90Â°</text>

            <!-- Punto di intersezione O -->
            <circle cx="150" cy="150" r="5" fill="#f5c842"/>

            <!-- Etichette rette -->
            <text x="256" y="143" fill="#7c6af7" font-size="14" font-family="DM Mono" font-weight="700">r</text>
            <text x="155" y="40" fill="#2dd4a4" font-size="14" font-family="DM Mono" font-weight="700">s</text>
            <!-- Etichetta O leggermente spostata -->
            <text x="157" y="147" fill="#f5c842" font-size="12" font-family="DM Mono" font-weight="700">O</text>
          </svg>
        </div>

        <div>
          <div style="margin-bottom: 0.5rem; font-size: 0.8rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 0.08em;">Esempi nella vita reale</div>
          <div class="example-item">
            <span class="example-icon">ğŸš—</span>
            <div class="example-text">
              <strong>Incrocio stradale</strong>
              Due strade che si intersecano a 90Â°
            </div>
          </div>
          <div class="example-item">
            <span class="example-icon">ğŸ““</span>
            <div class="example-text">
              <strong>Quaderni a quadretti</strong>
              Linee orizzontali âŸ‚ linee verticali
            </div>
          </div>
          <div class="example-item">
            <span class="example-icon">ğŸªŸ</span>
            <div class="example-text">
              <strong>Finestra</strong>
              I lati formano angoli retti ai vertici
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 2  COSTRUZIONE PERP.        -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="costruzione-perp">
    <div class="card">
      <div class="sec-num">02 â€” Costruzione</div>
      <h2 class="sec-title">Costruire la <span>Perpendicolare</span></h2>

      <div class="def-box sec" style="margin-bottom: 1.2rem;">
        <div class="def-label">Caso A â€” Punto P sulla retta</div>
        <p>Il punto da cui tracciare la perpendicolare <strong>si trova sulla retta r</strong>.</p>
      </div>

      <div class="row">
        <div class="canvas">
          <svg id="perpA" viewBox="0 0 400 350"></svg>
          <div class="btn-row">
            <button class="btn btn-primary" id="playA">â–¶ Riproduci</button>
            <button class="btn btn-ghost" id="pauseA">â¸ Pausa</button>
            <button class="btn btn-ghost" id="resetA">â†º Reset</button>
          </div>
          <div class="step-text" id="txtA"></div>
        </div>
        <div>
          <ol class="steps">
            <li>Data la retta <strong>r</strong> e il punto <strong>P</strong> su di essa.</li>
            <li>Segna <strong>A</strong> e <strong>B</strong> equidistanti da P.</li>
            <li>Con centro A, arco di raggio &gt; AP.</li>
            <li>Con centro B, stesso raggio: gli archi si incontrano in <strong>R</strong> e <strong>S</strong>.</li>
            <li>La retta <strong>RS</strong> passa per P ed Ã¨ âŸ‚ alla retta  r. âœ“</li>
          </ol>
        </div>
      </div>

      <div class="def-box sec" style="margin-top: 1.3rem; margin-bottom: 1.2rem;">
        <div class="def-label">Caso B â€” Punto P esterno alla retta</div>
        <p>Il punto da cui tracciare la perpendicolare Ã¨ <strong>esterno alla retta r</strong>.</p>
      </div>

      <div class="row">
        <div class="canvas">
          <svg id="perpB" viewBox="0 0 400 350"></svg>
          <div class="btn-row">
            <button class="btn btn-primary" id="playB">â–¶ Riproduci</button>
            <button class="btn btn-ghost" id="pauseB">â¸ Pausa</button>
            <button class="btn btn-ghost" id="resetB">â†º Reset</button>
          </div>
          <div class="step-text" id="txtB"></div>
        </div>
        <div>
          <ol class="steps">
            <li>Da <strong>P</strong> traccia una circonferenza che interseca r in <strong>A</strong> e <strong>B</strong>.</li>
            <li>Trova il punto medio <strong>M</strong> del segmento AB.</li>
            <li>La retta <strong>PM</strong> Ã¨ la perpendicolare cercata. âœ“</li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 3  PARALLELE                -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="parallele">
    <div class="card">
      <div class="sec-num">03 â€” Definizione</div>
      <h2 class="sec-title">Rette <span>Parallele</span></h2>

      <div class="def-box pri">
        <div class="def-label">Definizione</div>
        <p>Due rette si dicono <strong>parallele</strong> se <strong>non hanno punti in comune</strong> oppure se <strong>coincidono</strong>. Si scrive <strong> r  âˆ¥  s </strong>.</p>
      </div>

      <div class="row">
        <div class="canvas">
          <div class="canvas-title">Rette parallele distinte</div>
          <svg viewBox="0 0 300 180">
            <line x1="20" y1="60" x2="280" y2="60" stroke="#7c6af7" stroke-width="2.5"/>
            <line x1="20" y1="120" x2="280" y2="120" stroke="#2dd4a4" stroke-width="2.5"/>
            <text x="268" y="50" fill="#7c6af7" font-size="14" font-family="DM Mono" font-weight="700">r</text>
            <text x="268" y="112" fill="#2dd4a4" font-size="14" font-family="DM Mono" font-weight="700">s</text>
            <line x1="60" y1="60" x2="60" y2="120" stroke="#f5c842" stroke-width="1.5" stroke-dasharray="4"/>
            <text x="66" y="96" fill="#f5c842" font-size="13" font-family="DM Mono">d</text>
          </svg>
        </div>
        <div class="canvas">
          <div class="canvas-title">Rette coincidenti</div>
          <svg viewBox="0 0 300 180">
            <line x1="20" y1="90" x2="280" y2="90" stroke="#7c6af7" stroke-width="4"/>
            <line x1="20" y1="90" x2="280" y2="90" stroke="#2dd4a4" stroke-width="2" stroke-dasharray="9,5"/>
            <text x="258" y="78" fill="#7c6af7" font-size="14" font-family="DM Mono" font-weight="700">r</text>
            <text x="258" y="103" fill="#2dd4a4" font-size="14" font-family="DM Mono" font-weight="700">s</text>
            <text x="85" y="145" fill="#e4e2f0" font-size="13" opacity="0.7">r â‰¡ s (coincidenti)</text>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 4  COSTRUZIONE PARALLELA    -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="costruzione-par">
    <div class="card">
      <div class="sec-num">04 â€” Costruzione</div>
      <h2 class="sec-title">Costruire la <span>Parallela</span></h2>

      <div class="row">
        <div class="canvas">
          <svg id="parBuild" viewBox="0 0 400 350"></svg>
          <div class="btn-row">
            <button class="btn btn-primary" id="playPar">â–¶ Riproduci</button>
            <button class="btn btn-ghost" id="pausePar">â¸ Pausa</button>
            <button class="btn btn-ghost" id="resetPar">â†º Reset</button>
          </div>
          <div class="step-text" id="txtPar"></div>
        </div>
        <div>
          <div class="def-box sec">
            <div class="def-label">Passi (squadra e riga)</div>
            <ol class="steps">
              <li>Traccia <strong>t</strong> perpendicolare a r passante per P.</li>
              <li>Traccia <strong>s</strong> perpendicolare a t passante per P.</li>
              <li>Allora <strong>r âˆ¥ s</strong>. âœ“</li>
            </ol>
          </div>
          <div class="def-box amber" style="margin-top: 0.6rem;">
            <div class="def-label">Nota importante</div>
            <p>L'<strong>esistenza</strong> non richiede assiomi aggiuntivi oltre a quelli introdotti fino ad ora; l'<strong>unicitÃ </strong> richiede l'introduzione di un nuovo assioma: il V postulato di Euclide.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 5  V POSTULATO              -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="postulato">
    <div class="card">
      <div class="sec-num">05 â€” Assioma</div>
      <h2 class="sec-title">Il V Postulato <span>di Euclide</span></h2>

      <div class="def-box amber">
        <div class="def-label">PerchÃ© serve un postulato?</div>
        <p>L'unicitÃ  della parallela <strong>non si dimostra</strong> usando gli altri assiomi: va <strong>assunta</strong> come postulato aggiuntivo.</p>
      </div>

      <div class="row">
        <div class="canvas">
          <div class="canvas-title">Enunciato visivo</div>
          <svg viewBox="0 0 300 200">
            <line x1="20" y1="150" x2="280" y2="150" stroke="#7c6af7" stroke-width="2.5"/>
            <line x1="20" y1="70" x2="280" y2="70" stroke="#2dd4a4" stroke-width="2.5"/>
            <circle cx="150" cy="70" r="6" fill="#f5c842"/>
            <text x="158" y="63" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">P</text>
            <text x="267" y="142" fill="#7c6af7" font-size="13" font-family="DM Mono" font-weight="700">r</text>
            <text x="267" y="61" fill="#2dd4a4" font-size="13" font-family="DM Mono" font-weight="700">s</text>
            <line x1="150" y1="70" x2="150" y2="150" stroke="#f5c842" stroke-width="1.5" stroke-dasharray="5"/>
            <text x="80" y="120" fill="#e4e2f0" font-size="12" opacity="0.7">una sola parallela</text>
          </svg>
        </div>

        <div>
          <div class="def-box pri" style="margin-bottom: 0.8rem;">
            <div class="def-label">Enunciato</div>
            <p style="font-style: italic;">Â«Dato un punto P e una retta r, la retta passante per P e parallela a r Ã¨ <strong>unica</strong>Â»</p>
          </div>

          <div style="font-size: 0.82rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.5rem;">Geometrie non euclidee</div>
          <div class="info-grid">
            <div class="info-item">
              <strong style="color: var(--red);">Iperbolica</strong>
              Infinite parallele per lo stesso punto
            </div>
            <div class="info-item">
              <strong style="color: var(--amber);">Ellittica</strong>
              Nessuna parallela possibile
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 6  TRASVERSALE              -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="trasversale">
    <div class="card">
      <div class="sec-num">06 â€” Angoli</div>
      <h2 class="sec-title">Rette tagliate da una <span>Trasversale</span></h2>

      <div class="row">
        <div class="canvas">
          <svg id="trsv" viewBox="0 0 400 350">
            <!-- Angoli coniugati interni: fasce colorate tra le due rette (visibili solo quando attivi) -->
            <rect id="coniugati-int-band-left" x="0" y="100" width="400" height="150"
                  fill="rgba(79,163,247,0.08)" rx="0" opacity="0" pointer-events="none"/>
            <line x1="30" y1="100" x2="370" y2="100" stroke="#7c6af7" stroke-width="2.5"/>
            <text x="358" y="90" fill="#7c6af7" font-size="14" font-family="DM Mono" font-weight="700">r</text>
            <line x1="30" y1="250" x2="370" y2="250" stroke="#2dd4a4" stroke-width="2.5"/>
            <text x="358" y="240" fill="#2dd4a4" font-size="14" font-family="DM Mono" font-weight="700">s</text>
            <line x1="0" y1="-325" x2="400" y2="675" stroke="#f5c842" stroke-width="2"/>
            <text x="308" y="325" fill="#f5c842" font-size="14" font-family="DM Mono" font-weight="700">t</text>
            <circle cx="170" cy="100" r="5" fill="#fff" opacity="0.8"/>
            <circle cx="230" cy="250" r="5" fill="#fff" opacity="0.8"/>
            <!-- Angoli (1-8): settori calcolati con precisione matematica -->
            <!-- P=(170,100), t a 68.2Â° con orizz.: tâ†‘=-111.8Â°, tâ†“=68.2Â°, râ†=180Â°, râ†’=0Â° -->
            <!-- Ang 1 sopra-sx: da râ†(180Â°) a tâ†‘(-111.8Â°), CCW, settore 68.2Â° -->
            <path id="a1" d="M170,100 L140.0,100.0 A30,30 0 0 1 158.9,72.1 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l1" x="127" y="78" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">1</text>
            <!-- Ang 2 sopra-dx: da tâ†‘(-111.8Â°) a râ†’(0Â°), CW, settore 111.8Â° -->
            <path id="a2" d="M170,100 L158.9,72.1 A30,30 0 0 1 200.0,100.0 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l2" x="189" y="63" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">2</text>
            <!-- Ang 3 sotto-dx: da râ†’(0Â°) a tâ†“(68.2Â°), CW, settore 68.2Â° -->
            <path id="a3" d="M170,100 L200.0,100.0 A30,30 0 0 1 181.1,127.9 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l3" x="200" y="128" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">3</text>
            <!-- Ang 4 sotto-sx: da tâ†“(68.2Â°) a râ†(180Â°), CW, settore 111.8Â° -->
            <path id="a4" d="M170,100 L181.1,127.9 A30,30 0 0 1 140.0,100.0 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l4" x="131" y="134" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">4</text>
            <!-- Q=(230,250): identica struttura angolare (rette parallele) -->
            <!-- Ang 5 sopra-sx: da râ†(180Â°) a tâ†‘(-111.8Â°), CCW -->
            <path id="a5" d="M230,250 L200.0,250.0 A30,30 0 0 1 218.9,222.1 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l5" x="187" y="228" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">5</text>
            <!-- Ang 6 sopra-dx: da tâ†‘(-111.8Â°) a râ†’(0Â°), CW -->
            <path id="a6" d="M230,250 L218.9,222.1 A30,30 0 0 1 260.0,250.0 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l6" x="249" y="213" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">6</text>
            <!-- Ang 7 sotto-dx: da râ†’(0Â°) a tâ†“(68.2Â°), CW -->
            <path id="a7" d="M230,250 L260.0,250.0 A30,30 0 0 1 241.1,277.9 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l7" x="257" y="277" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">7</text>
            <!-- Ang 8 sotto-sx: da tâ†“(68.2Â°) a râ†(180Â°), CW -->
            <path id="a8" d="M230,250 L241.1,277.9 A30,30 0 0 1 200.0,250.0 Z" fill="rgba(255,255,255,0.15)" stroke="#fff" stroke-width="0"/>
            <text id="l8" x="196" y="286" fill="#fff" font-size="12" font-family="DM Mono" font-weight="700" opacity="0">8</text>
            <!-- Connettori per coppie speciali -->
            <!-- coniugati-int-connector rimosso -->
            <line id="coniugati-ext-connector" x1="161" y1="76" x2="221" y2="222"
                  stroke="#a78bfa" stroke-width="1.5" stroke-dasharray="5,4" opacity="0" pointer-events="none"/>
          </svg>
        </div>

        <div>
          <div style="margin-bottom: 0.6rem; font-size: 0.82rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 0.08em;">Evidenzia coppie di angoli</div>
          <div style="display: flex; flex-direction: column; gap: 0.4rem; margin-bottom: 0.8rem;">
            <button class="btn-angle angle" data-pair="3,5" data-color="#f06080">ğŸ”´ Alterni interni (3, 5)</button>
            <button class="btn-angle angle" data-pair="1,7" data-color="#f5c842">ğŸŸ¡ Alterni esterni (1, 7)</button>
            <button class="btn-angle angle" data-pair="1,5" data-color="#2dd4a4">ğŸŸ¢ Corrispondenti (1, 5)</button>
            <button class="btn-angle angle" data-pair="3,6" data-color="#4fa3f7">ğŸ”µ Coniugati interni (3, 6)</button>
            <button class="btn-angle angle" data-pair="2,7" data-color="#a78bfa" data-connector="coniugati-ext-connector">ğŸŸ£ Coniugati esterni (2, 7)</button>
            <button class="btn-ghost btn" style="border-radius:10px; margin-top: 0.2rem;" id="resetAng">â†º Reset angoli</button>
          </div>

          <div class="def-box sec">
            <div class="def-label">Criterio generale di parallelismo</div>
            <p style="font-size:0.92rem; line-height:1.6; margin-bottom:0.9rem;">
              Due rette tagliate da una trasversale sono <strong>parallele</strong> se e solo se
              formano una delle seguenti coppie di angoli:
            </p>
            <div style="display:flex; flex-direction:column; gap:0.45rem;">
              <div style="display:flex; align-items:center; gap:0.7rem; background:rgba(240,96,128,0.10); border:1px solid rgba(240,96,128,0.25); border-radius:9px; padding:0.55rem 0.85rem;">
                <span style="font-size:1.1rem; flex-shrink:0;">ğŸ”´</span>
                <div>
                  <span style="font-size:0.78rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:#f06080; display:block; margin-bottom:0.1rem;">Alterni interni / esterni</span>
                  <span style="font-size:0.88rem; color:var(--text);"><strong style="color:#fff;">congruenti</strong></span>
                </div>
              </div>
              <div style="display:flex; align-items:center; gap:0.7rem; background:rgba(45,212,164,0.10); border:1px solid rgba(45,212,164,0.25); border-radius:9px; padding:0.55rem 0.85rem;">
                <span style="font-size:1.1rem; flex-shrink:0;">ğŸŸ¢</span>
                <div>
                  <span style="font-size:0.78rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:#2dd4a4; display:block; margin-bottom:0.1rem;">Corrispondenti</span>
                  <span style="font-size:0.88rem; color:var(--text);"><strong style="color:#fff;">congruenti</strong></span>
                </div>
              </div>
              <div style="display:flex; align-items:center; gap:0.7rem; background:rgba(79,163,247,0.10); border:1px solid rgba(79,163,247,0.25); border-radius:9px; padding:0.55rem 0.85rem;">
                <span style="font-size:1.1rem; flex-shrink:0;">ğŸ”µ</span>
                <div>
                  <span style="font-size:0.78rem; font-weight:700; text-transform:uppercase; letter-spacing:0.08em; color:#4fa3f7; display:block; margin-bottom:0.1rem;">Coniugati interni / esterni</span>
                  <span style="font-size:0.88rem; color:var(--text);"><strong style="color:#fff;">supplementari</strong> (somma = 180Â°)</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 7  TRIANGOLI                -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="triangoli">
    <div class="card">
      <div class="sec-num">07 â€” Teoremi</div>
      <h2 class="sec-title"><span>Triangoli</span> e angoli</h2>

      <!-- Angolo esterno -->
      <div class="def-box pri" style="margin-bottom: 1rem;">
        <div class="def-label">Teorema dell'angolo esterno</div>
        <p>Ciascun angolo esterno ( Î´ ) di un triangolo Ã¨ congruente alla <strong>somma</strong> degli angoli <strong>interni</strong> ( Î± e Î³ )  a esso <strong>non adiacenti</strong>.</p>
      </div>

      <div class="row" style="margin-bottom: 1.2rem;">
        <div class="canvas">
          <svg id="triExt" viewBox="0 0 300 220">
            <line id="AB" stroke="#4fa3f7" stroke-width="2"/>
            <line id="BC" stroke="#4fa3f7" stroke-width="2"/>
            <line id="AC" stroke="#4fa3f7" stroke-width="2"/>
            <line id="BCe" stroke="#f06080" stroke-width="2" stroke-dasharray="6,4"/>
            <circle id="A" r="5" fill="#0c0c14" stroke="#4fa3f7" stroke-width="2"/>
            <circle id="B" r="5" fill="#0c0c14" stroke="#4fa3f7" stroke-width="2"/>
            <circle id="C" r="5" fill="#0c0c14" stroke="#4fa3f7" stroke-width="2"/>
            <path id="alpha" fill="rgba(79,163,247,.3)" stroke="#4fa3f7" stroke-width="2"/>
            <path id="gamma" fill="rgba(16,185,129,.3)" stroke="#10b981" stroke-width="2"/>
            <path id="delta" fill="rgba(240,96,128,.3)" stroke="#f06080" stroke-width="2"/>
          </svg>
        </div>
        <div style="display: flex; align-items: center;">
          <div>
            <div class="formula">Î´ = Î± + Î³</div>
            <div class="def-box sec" style="margin-top: 0.6rem;">
              <div class="def-label">Osservazione</div>
              <p>Il primo teorema dell'angolo esterno puÃ² essere visto come conseguenza di questo teorema.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Somma angoli -->
      <div class="def-box pri" style="margin-bottom: 1rem;">
        <div class="def-label">Teorema â€” Somma degli angoli interni</div>
        <p>La somma delle ampiezze degli angoli interni di un triangolo Ã¨ <strong>180Â°</strong> (angolo piatto).</p>
      </div>

      <div class="row">
        <div class="canvas">
          <svg id="triSum" viewBox="0 0 400 280"></svg>
          <div class="btn-row">
            <button class="btn btn-primary" id="showSum">â–¶ Mostra dimostrazione</button>
            <button class="btn btn-ghost" id="resetSum">â†º Reset</button>
          </div>
        </div>
        <div>
          <div class="formula" style="font-size: 1.1rem;">Î± + Î² + Î³ = 180Â°</div>
          <ol class="steps" style="margin-top: 0.8rem;">
            <li>Traccia per C una retta <strong>parallela al lato AB</strong>.</li>
            <li>Valgono le seguenti congruenze fra angoli: Î±â€² â‰… Î± e Î²â€² â‰… Î². <strong>PerchÃ©?</strong></li>
            <li>Sulla retta parallela: Î±â€² + Î³ + Î²â€² = 180Â° (angolo piatto).</li>
            <li>Quindi anche <strong>Î± + Î² + Î³ = 180Â°</strong>. âœ“</li>
          </ol>
        </div>
      </div>
    </div>

    <!-- Criterio LAA -->
    <div class="card" id="criterio-LAA">
      <div class="sec-num">Criterio generalizzato</div>
      <h2 class="sec-title" style="font-size: 1.2rem;">Secondo criterio di congruenza generalizzato</h2>

      <div class="def-box pri" style="margin-bottom: 1rem;">
        <div class="def-label">Enunciato</div>
        <p>Due triangoli che hanno <strong>due angoli</strong> e <strong>un lato</strong> ordinatamente congruenti sono <strong>congruenti</strong>.</p>
      </div>

      <div class="row">
        <div class="canvas">
          <svg id="laaA" viewBox="0 0 300 220">
            <polygon points="60,170 240,170 150,60" fill="none" stroke="#7c6af7" stroke-width="2"/>
            <line id="laaA-AB" x1="60" y1="170" x2="240" y2="170" stroke="#fbbf24" stroke-width="4"/>
            <path id="laaA-angA" d="M60 170 L90 170 A30 30 0 0 0 75 145 Z" fill="rgba(240,96,128,.3)" stroke="#f06080" stroke-width="2"/>
            <path id="laaA-angC" d="M150 60 L170 100 A35 35 0 0 0 130 100 Z" fill="rgba(45,212,164,.3)" stroke="#2dd4a4" stroke-width="2"/>
            <text x="52" y="188" fill="#e4e2f0" font-size="12" font-family="DM Mono">A</text>
            <text x="242" y="188" fill="#e4e2f0" font-size="12" font-family="DM Mono">B</text>
            <text x="144" y="50" fill="#e4e2f0" font-size="12" font-family="DM Mono">C</text>
            <text x="118" y="192" fill="#fbbf24" font-size="11" font-weight="700">AB (lato)</text>
          </svg>
        </div>
        <div class="canvas">
          <svg id="laaB" viewBox="0 0 300 220">
            <polygon points="70,160 250,160 170,60" fill="none" stroke="#7c6af7" stroke-width="2"/>
            <line id="laaB-AB" x1="70" y1="160" x2="250" y2="160" stroke="#fbbf24" stroke-width="4"/>
            <path id="laaB-angA" d="M70 160 L100 160 A30 30 0 0 0 85 135 Z" fill="rgba(240,96,128,.3)" stroke="#f06080" stroke-width="2"/>
            <path id="laaB-angC" d="M170 60 L195 100 A35 35 0 0 0 145 100 Z" fill="rgba(45,212,164,.3)" stroke="#2dd4a4" stroke-width="2"/>
            <text x="62" y="178" fill="#e4e2f0" font-size="12" font-family="DM Mono">Aâ€²</text>
            <text x="252" y="178" fill="#e4e2f0" font-size="12" font-family="DM Mono">Bâ€²</text>
            <text x="166" y="50" fill="#e4e2f0" font-size="12" font-family="DM Mono">Câ€²</text>
            <text x="115" y="180" fill="#fbbf24" font-size="11" font-weight="700">Aâ€²Bâ€² (lato)</text>
          </svg>
        </div>
      </div>

      <div class="btn-row" style="margin-top: 0.8rem;">
        <button class="btn btn-primary" id="chkLAA">Mostra corrispondenze</button>
        <button class="btn btn-ghost" id="rstLAA">â†º Reset</button>
      </div>
      <div class="step-text" id="outLAA" style="margin-top: 0.5rem; text-align: left; font-family: 'Plus Jakarta Sans'; font-size: 0.87rem;"></div>
    </div>

    <!-- Criterio congruenza triangoli rettangoli -->
    <div class="card" id="criterio-trett">
      <div class="sec-num">TRett â€” Criteri speciali</div>
      <h2 class="sec-title" style="font-size: 1.2rem;">Congruenza dei <span>Triangoli Rettangoli</span></h2>

      <div class="def-box sec" style="margin-bottom: 1rem;">
        <div class="def-label">Osservazione</div>
        <p>Con i triangoli rettangoli sono sufficienti <strong>meno elementi</strong>, rispetto al caso generale, per determinare la congruenza.</p>
      </div>

      <!-- Criterio 1: Ipotenusa e cateto -->
      <div class="def-box pri" style="margin-bottom: 1rem;">
        <div class="def-label">Criterio di congruenza dei triangoli rettangoli â€” Ipotenusa e cateto</div>
        <p>Se due triangoli rettangoli hanno ordinatamente congruenti l'<strong>ipotenusa</strong> e un <strong>cateto</strong>, essi sono congruenti.</p>
      </div>

      <div class="row" style="margin-bottom: 1.2rem;">
        <div class="canvas">
          <div class="canvas-title">CRITERIO â€” ipotenusa e cateto</div>
          <svg viewBox="0 0 300 200">
            <!-- Triangolo rettangolo 1: A=(30,170) B=(120,170) C=(30,90) â€” cateto c1=90, c2=80 -->
            <polygon points="30,170 120,170 30,90" fill="rgba(124,106,247,0.08)" stroke="#7c6af7" stroke-width="2.5"/>
            <rect x="30" y="155" width="15" height="15" fill="none" stroke="#e4e2f0" stroke-width="1.8"/>
            <!-- Ipotenusa evidenziata -->
            <line x1="120" y1="170" x2="30" y2="90" stroke="#fbbf24" stroke-width="4"/>
            <!-- Cateto verticale evidenziato -->
            <line x1="30" y1="170" x2="30" y2="90" stroke="#f06080" stroke-width="4"/>
            <circle cx="30" cy="170" r="4" fill="#e4e2f0"/>
            <circle cx="120" cy="170" r="4" fill="#fbbf24"/>
            <circle cx="30" cy="90" r="4" fill="#f06080"/>
            <text x="14" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">A</text>
            <text x="122" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">B</text>
            <text x="14" y="86" fill="#e4e2f0" font-size="12" font-family="DM Mono">C</text>

            <!-- Triangolo rettangolo 2: A'=(175,170) B'=(265,170) C'=(175,90) â€” IDENTICO al T1 -->
            <polygon points="175,170 265,170 175,90" fill="rgba(45,212,164,0.08)" stroke="#2dd4a4" stroke-width="2.5"/>
            <rect x="175" y="155" width="15" height="15" fill="none" stroke="#e4e2f0" stroke-width="1.8"/>
            <line x1="265" y1="170" x2="175" y2="90" stroke="#fbbf24" stroke-width="4"/>
            <line x1="175" y1="170" x2="175" y2="90" stroke="#f06080" stroke-width="4"/>
            <circle cx="175" cy="170" r="4" fill="#e4e2f0"/>
            <circle cx="265" cy="170" r="4" fill="#fbbf24"/>
            <circle cx="175" cy="90" r="4" fill="#f06080"/>
            <text x="159" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">Aâ€²</text>
            <text x="267" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">Bâ€²</text>
            <text x="159" y="86" fill="#e4e2f0" font-size="12" font-family="DM Mono">Câ€²</text>
            <!-- Marcatura congruenza ipotenusa: doppio trattino perpendicolare alla BC -->
            <!-- perp dir: (0.664,-0.747), tick=5 -->
            <line x1="71.7" y1="134.7" x2="78.3" y2="125.3" stroke="#fbbf24" stroke-width="2.5"/>
            <line x1="74.7" y1="137.2" x2="81.3" y2="127.8" stroke="#fbbf24" stroke-width="2.5"/>
            <line x1="216.7" y1="134.7" x2="223.3" y2="125.3" stroke="#fbbf24" stroke-width="2.5"/>
            <line x1="219.7" y1="137.2" x2="226.3" y2="127.8" stroke="#fbbf24" stroke-width="2.5"/>
            <!-- Marcatura congruenza cateto verticale: doppio trattino orizzontale -->
            <line x1="25" y1="127" x2="35" y2="127" stroke="#f06080" stroke-width="2.5"/>
            <line x1="25" y1="133" x2="35" y2="133" stroke="#f06080" stroke-width="2.5"/>
            <line x1="170" y1="127" x2="180" y2="127" stroke="#f06080" stroke-width="2.5"/>
            <line x1="170" y1="133" x2="180" y2="133" stroke="#f06080" stroke-width="2.5"/>
          </svg>
        </div>
        <div style="display: flex; align-items: center;">
          <div>
            <div class="formula" style="font-size: 1rem;">BC â‰… Bâ€²Câ€² &amp; AC â‰… Aâ€²Câ€² &amp; &Acirc;â‰… &Acirc;â€²
</div>
            <div class="def-box amber" style="margin-top: 0.6rem;">
              <div class="def-label">Nota</div>
              <p>Questo criterio non ha un equivalente diretto nel caso generale: fissato l'angolo retto, ipotenusa + cateto determinano <strong>completamente</strong> il triangolo.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Criterio 2: Due cateti -->
      <div class="def-box pri" style="margin-bottom: 1rem;">
        <div class="def-label">Congruenza Due cateti</div>
        <p>Due triangoli rettangoli sono <strong>congruenti</strong> se hanno i <strong>due cateti</strong> rispettivamente congruenti.</p>
      </div>

      <div class="row" style="margin-bottom: 1.2rem;">
        <div class="canvas">
          <div class="canvas-title">Criterio Due cateti</div>
          <svg viewBox="0 0 300 200">
            <!-- Triangolo 1: A=(30,170) B=(120,170) C=(30,90) â€” c1=90, c2=80 -->
            <polygon points="30,170 120,170 30,90" fill="rgba(124,106,247,0.08)" stroke="#7c6af7" stroke-width="2.5"/>
            <rect x="30" y="155" width="15" height="15" fill="none" stroke="#e4e2f0" stroke-width="1.8"/>
            <line x1="30" y1="170" x2="120" y2="170" stroke="#f5c842" stroke-width="4"/>
            <line x1="30" y1="170" x2="30" y2="90" stroke="#f06080" stroke-width="4"/>
            <circle cx="30" cy="170" r="4" fill="#e4e2f0"/>
            <circle cx="120" cy="170" r="4" fill="#f5c842"/>
            <circle cx="30" cy="90" r="4" fill="#f06080"/>
            <text x="14" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">A</text>
            <text x="122" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">B</text>
            <text x="14" y="86" fill="#e4e2f0" font-size="12" font-family="DM Mono">C</text>

            <!-- Triangolo 2: A'=(175,170) B'=(265,170) C'=(175,90) â€” IDENTICO -->
            <polygon points="175,170 265,170 175,90" fill="rgba(45,212,164,0.08)" stroke="#2dd4a4" stroke-width="2.5"/>
            <rect x="175" y="155" width="15" height="15" fill="none" stroke="#e4e2f0" stroke-width="1.8"/>
            <line x1="175" y1="170" x2="265" y2="170" stroke="#f5c842" stroke-width="4"/>
            <line x1="175" y1="170" x2="175" y2="90" stroke="#f06080" stroke-width="4"/>
            <circle cx="175" cy="170" r="4" fill="#e4e2f0"/>
            <circle cx="265" cy="170" r="4" fill="#f5c842"/>
            <circle cx="175" cy="90" r="4" fill="#f06080"/>
            <text x="159" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">Aâ€²</text>
            <text x="267" y="186" fill="#e4e2f0" font-size="12" font-family="DM Mono">Bâ€²</text>
            <text x="159" y="86" fill="#e4e2f0" font-size="12" font-family="DM Mono">Câ€²</text>
            <!-- Marcatura cateto orizzontale c1: trattino verticale alla mezzeria -->
            <line x1="75" y1="165" x2="75" y2="175" stroke="#f5c842" stroke-width="2.5"/>
            <line x1="220" y1="165" x2="220" y2="175" stroke="#f5c842" stroke-width="2.5"/>
            <!-- Marcatura cateto verticale c2: doppio trattino orizzontale alla mezzeria -->
            <line x1="24" y1="127" x2="36" y2="127" stroke="#f06080" stroke-width="2.5"/>
            <line x1="24" y1="133" x2="36" y2="133" stroke="#f06080" stroke-width="2.5"/>
            <line x1="169" y1="127" x2="181" y2="127" stroke="#f06080" stroke-width="2.5"/>
            <line x1="169" y1="133" x2="181" y2="133" stroke="#f06080" stroke-width="2.5"/>
          </svg>
        </div>
        <div style="display: flex; align-items: center;">
          <div>
            <div class="formula" style="font-size: 1rem;">AB â‰… Aâ€²Bâ€² &amp; AC â‰… Aâ€²Câ€²</div>
            <div class="def-box sec" style="margin-top: 0.6rem;">
              <div class="def-label">Osservazione</div>
              <p> E' una diretta conseguenza del Primo criterio di congruenza dei triangoli.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Riepilogo -->
      <div class="def-box amber">
        <div class="def-label">Riepilogo congruenze per i triangoli rettangoli</div>
        <p>
          <strong>IC</strong> â€” Ipotenusa + 1 cateto congruenti â†’ triangoli congruenti.<br>
          <strong>CC</strong> â€” Entrambi i cateti congruenti â†’ triangoli congruenti.<br>
          <strong>IA</strong> â€” Ipotenusa + 1 angolo acuto congruenti â†’ triangoli congruenti (II criterio generalizzato).<br>
          In tutti i casi l'<strong>angolo retto</strong> Ã¨ giÃ  congruente per definizione.
        </p>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Â§ 8  ESERCIZI                 -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="esercizi">
    <div class="card">
      <div class="sec-num">08 â€” Esercizi interattivi</div>
      <h2 class="sec-title">Metti alla <span>Prova</span></h2>

      <!-- Barra progresso -->
      <div style="display:flex; align-items:center; gap:0.7rem; margin-bottom:1.2rem;">
        <span style="font-size:0.8rem; color:var(--muted); white-space:nowrap;">Punteggio:</span>
        <div class="progress-bar" style="flex:1;"><div class="progress-fill" id="score-bar" style="width:0%"></div></div>
        <span id="score-label" style="font-family:'DM Mono'; font-size:0.85rem; color:var(--sec); white-space:nowrap;">0 / 5</span>
      </div>

      <!-- â”€â”€â”€ ESERCIZIO 1: Calcola l'angolo mancante â”€â”€â”€ -->
      <div class="ex-card" id="ex1-card">
        <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:0.5rem; margin-bottom:0.8rem;">
          <div class="ex-title" style="margin:0;">1) Calcola l'angolo mancante</div>
          <span class="badge badge-pri">Angoli</span>
        </div>
        <p style="font-size:0.88rem; color:var(--muted); margin-bottom:0.8rem;">Le rette r e s sono parallele, tagliate dalla trasversale t. L'angolo Î± = 65Â°. Trova il valore degli angoli indicati.</p>
        <div class="canvas" style="margin-bottom:0.8rem;">
          <svg viewBox="0 0 380 240" id="ex1-svg">
            <!-- Griglia leggera di sfondo -->
            <rect x="0" y="0" width="380" height="240" fill="none"/>

            <!-- Retta r -->
            <line x1="18" y1="80" x2="362" y2="80" stroke="#7c6af7" stroke-width="2.5"/>
            <text x="352" y="68" fill="#7c6af7" font-size="13" font-family="DM Mono" font-weight="700">r</text>

            <!-- Retta s -->
            <line x1="18" y1="180" x2="362" y2="180" stroke="#2dd4a4" stroke-width="2.5"/>
            <text x="352" y="168" fill="#2dd4a4" font-size="13" font-family="DM Mono" font-weight="700">s</text>

            <!-- Trasversale t (angolo 65Â° con l'orizzontale, sweep orario)
                 P su r = (130, 80), Q su s = (176.6, 180)
                 estesa: (102,20) â†’ (191,210) -->
            <line x1="102" y1="20" x2="191" y2="210" stroke="#f5c842" stroke-width="2"/>
            <text x="192" y="210" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">t</text>

            <!-- Punti di intersezione -->
            <circle cx="130" cy="80" r="4.5" fill="#e4e2f0" opacity="0.9"/>
            <circle cx="176" cy="180" r="4.5" fill="#e4e2f0" opacity="0.9"/>

            <!-- Angolo Î±=65Â° (sopra-sinistra di P):
                 Arco da 180Â° a 245Â° sweep=1, r=26
                 M130,80 L104,80 A26,26 0 0 1 119.0,56.4 Z -->
            <path d="M130,80 L104.0,80.0 A26,26 0 0 1 119.0,56.4 Z"
                  fill="rgba(245,200,66,0.30)" stroke="#f5c842" stroke-width="2"/>

            <!-- Angolo Î²=115Â° (sopra-destra di P):
                 Arco da 0Â° a -115Â° sweep=0, r=26
                 M130,80 L156,80 A26,26 0 0 0 119.0,56.4 Z -->
            <path d="M130,80 L156.0,80.0 A26,26 0 0 0 119.0,56.4 Z"
                  fill="rgba(124,106,247,0.22)" stroke="#7c6af7" stroke-width="1.5" stroke-dasharray="5,3"/>

            <!-- Angolo Î³=65Â° (sopra-sinistra di Q, alterno interno di Î±):
                 Identico ad Î± ma centrato su Q=(176,180)
                 M176,180 L150,180 A26,26 0 0 1 165.0,156.4 Z -->
            <path d="M176,180 L150.0,180.0 A26,26 0 0 1 165.0,156.4 Z"
                  fill="rgba(240,96,128,0.22)" stroke="#f06080" stroke-width="1.5" stroke-dasharray="5,3"/>

            <!-- Etichette angoli -->
            <!-- Î±: centro arco a 212.5Â°, r+20=46 da P -->
            <text x="91" y="58" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">Î±=65Â°</text>

            <!-- Î²: centro arco a 302.5Â° da P â†’ (155, 35) area -->
            <text x="152" y="44" fill="#7c6af7" font-size="14" font-family="DM Mono" font-weight="700">Î²=?</text>

            <!-- Î³: sopra-sinistra di Q -->
            <text x="130" y="155" fill="#f06080" font-size="14" font-family="DM Mono" font-weight="700">Î³=?</text>

            <!-- Marcatura parallele (frecce piccole) -->
            <text x="42" y="74" fill="#7c6af7" font-size="10" font-family="DM Mono" opacity="0.6">â–¶â–¶</text>
            <text x="42" y="174" fill="#2dd4a4" font-size="10" font-family="DM Mono" opacity="0.6">â–¶â–¶</text>
          </svg>
        </div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:0.7rem; margin-bottom:0.8rem;">
          <div>
            <label style="font-size:0.82rem; color:var(--muted); display:block; margin-bottom:0.3rem;">Angolo Î² (supplementare di Î±)</label>
            <div style="display:flex; gap:0.5rem; align-items:center;">
              <input type="number" id="ans1a" placeholder="Â°" min="0" max="360"
                style="width:80px; background:var(--surface); border:1.5px solid var(--border); border-radius:8px; padding:0.4rem 0.6rem; color:var(--text); font-family:'DM Mono'; font-size:1rem; outline:none;">
              <span style="font-family:'DM Mono'; color:var(--muted);">Â°</span>
            </div>
          </div>
          <div>
            <label style="font-size:0.82rem; color:var(--muted); display:block; margin-bottom:0.3rem;">Angolo Î³ (alterno interno di Î±)</label>
            <div style="display:flex; gap:0.5rem; align-items:center;">
              <input type="number" id="ans1b" placeholder="Â°" min="0" max="360"
                style="width:80px; background:var(--surface); border:1.5px solid var(--border); border-radius:8px; padding:0.4rem 0.6rem; color:var(--text); font-family:'DM Mono'; font-size:1rem; outline:none;">
              <span style="font-family:'DM Mono'; color:var(--muted);">Â°</span>
            </div>
          </div>
        </div>
        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkEx1()">âœ“ Verifica</button>
          <button class="btn btn-sec" onclick="toggleSol('sol1box')">Soluzione</button>
        </div>
        <div id="res1" class="result"></div>
        <div id="sol1box" class="sol-box">
          <strong>Î² = 115Â°</strong> perchÃ© Î± e Î² sono supplementari: 180Â° âˆ’ 65Â° = 115Â°.<br>
          <strong>Î³ = 65Â°</strong> perchÃ© r âˆ¥ s â†’ gli angoli alterni interni sono congruenti.
        </div>
      </div>

      <!-- â”€â”€â”€ ESERCIZIO 2: Vero o Falso â”€â”€â”€ -->
      <div class="ex-card" id="ex2-card">
        <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:0.5rem; margin-bottom:0.8rem;">
          <div class="ex-title" style="margin:0;">2) Vero o Falso?</div>
          <span class="badge badge-sec">Ragionamento</span>
        </div>
        <p style="font-size:0.88rem; color:var(--muted); margin-bottom:0.8rem;">Per ogni affermazione scegli se Ã¨ vera o falsa.</p>
        <div id="tf-questions" style="display:flex; flex-direction:column; gap:0.6rem;"></div>
        <div class="btn-row" style="margin-top:0.8rem;">
          <button class="btn btn-primary" onclick="checkEx2()">âœ“ Verifica tutto</button>
          <button class="btn btn-sec" onclick="toggleSol('sol2box')">Soluzione</button>
        </div>
        <div id="res2" class="result"></div>
        <div id="sol2box" class="sol-box" id="sol2box">
          <strong>V</strong> â€” Due rette perpendicolari formano 4 angoli retti.<br>
          <strong>F</strong> â€” Due rette parallele si incontrano in un punto all'infinito: per definizione, non si incontrano mai (o coincidono).<br>
          <strong>V</strong> â€” Gli angoli alterni interni sono congruenti se le rette sono parallele.<br>
          <strong>F</strong> â€” La somma degli angoli di un triangolo Ã¨ 180Â°, non 360Â°.<br>
          <strong>V</strong> â€” Per il V postulato, per un punto esterno a una retta passa una sola parallela.
        </div>
      </div>

      <!-- â”€â”€â”€ ESERCIZIO 3: Terzo angolo del triangolo â”€â”€â”€ -->
      <div class="ex-card" id="ex3-card">
        <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:0.5rem; margin-bottom:0.8rem;">
          <div class="ex-title" style="margin:0;">3) Trova l'angolo mancante del triangolo</div>
          <span class="badge badge-pri">Triangoli</span>
        </div>
        <p style="font-size:0.88rem; color:var(--muted); margin-bottom:0.8rem;">Nel triangolo ABC sono noti due angoli. Usa il teorema sulla somma degli angoli interni per trovare l'angolo <strong style="color:#f06080;">C = ?</strong></p>

        <div class="canvas" style="margin-bottom:1rem;">
          <!--
            Triangolo con angoli ESATTI calcolati trigonometricamente:
            A=(80,190), B=(280,190), C=(188.7,98.7)
            angA=40Â°, angB=45Â°, angC=95Â°
          -->
          <svg viewBox="0 0 360 215">

            <!-- Sfondo triangolo -->
            <polygon points="80,190 280,190 188.7,98.7"
                     fill="rgba(124,106,247,0.07)" stroke="none"/>

            <!-- Lati del triangolo -->
            <line x1="80" y1="190" x2="280" y2="190" stroke="#e4e2f0" stroke-width="2" opacity="0.3"/>
            <line x1="80" y1="190" x2="188.7" y2="98.7" stroke="#7c6af7" stroke-width="2.5"/>
            <line x1="280" y1="190" x2="188.7" y2="98.7" stroke="#7c6af7" stroke-width="2.5"/>
            <line x1="80" y1="190" x2="280" y2="190" stroke="#7c6af7" stroke-width="2.5"/>

            <!-- Angolo A = 40Â° (giallo/ambra)
                 pA = M80,190 L106,190 A26,26 0 0 0 99.9,173.3 Z  -->
            <path d="M80.0,190.0 L106.0,190.0 A26,26 0 0 0 99.9,173.3 Z"
                  fill="rgba(245,200,66,0.35)" stroke="#f5c842" stroke-width="2"/>

            <!-- Angolo B = 45Â° (verde acqua)
                 pB = M280,190 L261.6,171.6 A26,26 0 0 0 254,190 Z  -->
            <path d="M280.0,190.0 L261.6,171.6 A26,26 0 0 0 254.0,190.0 Z"
                  fill="rgba(45,212,164,0.35)" stroke="#2dd4a4" stroke-width="2"/>

            <!-- Angolo C = 95Â° (rosso, da trovare)
                 d_CA=140Â°, d_CB=45Â°, sweep=1
                 pC = M188.7,98.7 L168.8,115.5 A26,26 0 0 1 207.1,117.1 Z  -->
            <path d="M188.7,98.7 L168.8,115.5 A26,26 0 0 1 207.1,117.1 Z"
                  fill="rgba(240,96,128,0.25)" stroke="#f06080" stroke-width="2" stroke-dasharray="5,3"/>

            <!-- Vertici con cerchi colorati -->
            <circle cx="80"   cy="190"  r="5" fill="#f5c842"/>
            <circle cx="280"  cy="190"  r="5" fill="#2dd4a4"/>
            <circle cx="188.7" cy="98.7" r="5" fill="#f06080"/>

            <!-- Etichette vertici -->
            <text x="62"  y="210" fill="#f5c842" font-size="14" font-family="DM Mono" font-weight="700">A</text>
            <text x="283" y="210" fill="#2dd4a4" font-size="14" font-family="DM Mono" font-weight="700">B</text>
            <text x="178" y="90"  fill="#f06080" font-size="14" font-family="DM Mono" font-weight="700">C</text>

            <!-- Etichette angoli posizionate sul bisettor dell'arco -->
            <!-- lA=(119,176): A=40Â° -->
            <text x="107" y="174" fill="#f5c842" font-size="12" font-family="DM Mono" font-weight="700">40Â°</text>

            <!-- lB=(241,174): B=45Â° -->
            <text x="226" y="174" fill="#2dd4a4" font-size="12" font-family="DM Mono" font-weight="700">45Â°</text>

            <!-- lC=(187,145): C=? con punto interrogativo animato -->
            <text x="174" y="148" fill="#f06080" font-size="15" font-family="DM Mono" font-weight="700">?</text>

            <!-- Formula hint discreta in basso -->
            <text x="180" y="208" fill="#9895b5" font-size="11" font-family="DM Mono"
                  text-anchor="middle" opacity="0.7">A + B + C = 180Â°</text>
          </svg>
        </div>

        <!-- Input risposta -->
        <div style="background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:0.9rem 1rem; margin-bottom:0.8rem;">
          <div style="font-size:0.82rem; color:var(--muted); margin-bottom:0.6rem; font-weight:600;">Calcola C applicando il teorema:</div>
          <div style="display:flex; align-items:center; gap:0.6rem; flex-wrap:wrap;">
            <span style="font-family:'DM Mono'; font-size:0.95rem; color:var(--text);">C = 180Â° âˆ’ 40Â° âˆ’ 45Â° =</span>
            <input type="number" id="ans3" placeholder="?" min="0" max="180"
              style="width:74px; background:var(--surface2); border:1.5px solid var(--border); border-radius:8px; padding:0.4rem 0.6rem; color:var(--text); font-family:'DM Mono'; font-size:1.1rem; outline:none; text-align:center;">
            <span style="font-family:'DM Mono'; color:var(--muted); font-size:0.95rem;">Â°</span>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkEx3()">âœ“ Verifica</button>
          <button class="btn btn-sec" onclick="toggleSol('sol3box')">Soluzione</button>
        </div>
        <div id="res3" class="result"></div>
        <div id="sol3box" class="sol-box">
          <strong>C = 95Â°</strong><br>
          Per il teorema della somma degli angoli interni di un triangolo:<br>
          A + B + C = 180Â°<br>
          40Â° + 45Â° + C = 180Â°<br>
          C = 180Â° âˆ’ 40Â° âˆ’ 45Â° = <strong>95Â°</strong>
        </div>
      </div>

      <!-- â”€â”€â”€ ESERCIZIO 4: Abbina la definizione â”€â”€â”€ -->
      <div class="ex-card" id="ex4-card">
        <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:0.5rem; margin-bottom:0.8rem;">
          <div class="ex-title" style="margin:0;">4) Abbina termine e definizione</div>
          <span class="badge badge-sec">Memoria</span>
        </div>
        <p style="font-size:0.88rem; color:var(--muted); margin-bottom:0.8rem;">Trascina o seleziona il termine corretto per ogni definizione.</p>
        <div id="match-area" style="display:flex; flex-direction:column; gap:0.5rem;"></div>
        <div class="btn-row" style="margin-top:0.8rem;">
          <button class="btn btn-primary" onclick="checkEx4()">âœ“ Verifica</button>
          <button class="btn btn-sec" onclick="toggleSol('sol4box')">Soluzione</button>
        </div>
        <div id="res4" class="result"></div>
        <div id="sol4box" class="sol-box">
          <strong>Rette perpendicolari</strong> â†’ si incontrano formando 4 angoli retti.<br>
          <strong>Rette parallele</strong> â†’ non hanno punti in comune (o coincidono).<br>
          <strong>Trasversale</strong> â†’ retta che taglia altre due rette in due punti distinti.<br>
          <strong>Alterni interni</strong> â†’ coppie di angoli uguali su lati opposti della trasversale, tra le due rette.<br>
          <strong>V postulato</strong> â†’ per un punto esterno a una retta passa una sola parallela.
        </div>
      </div>

      <!-- â”€â”€â”€ ESERCIZIO 5: Costruzione guidata â”€â”€â”€ -->
      <div class="ex-card" id="ex5-card">
        <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:0.5rem; margin-bottom:0.8rem;">
          <div class="ex-title" style="margin:0;">5) Ordina i passi della costruzione</div>
          <span class="badge badge-pri">Procedura</span>
        </div>
        <p style="font-size:0.88rem; color:var(--muted); margin-bottom:0.8rem;">Rimetti in ordine i passi per costruire la perpendicolare da un punto P <em>sulla</em> retta r. Clicca i passi nell'ordine corretto.</p>
        <div id="order-steps" style="display:flex; flex-direction:column; gap:0.4rem; margin-bottom:0.8rem;"></div>
        <div id="order-sequence" style="min-height:44px; border:1.5px dashed var(--border); border-radius:10px; padding:0.5rem 0.8rem; margin-bottom:0.8rem; font-family:'DM Mono'; font-size:0.8rem; color:var(--sec);">
          Sequenza scelta: <span id="seq-display">â€”</span>
        </div>
        <div class="btn-row">
          <button class="btn btn-primary" onclick="checkEx5()">âœ“ Verifica ordine</button>
          <button class="btn btn-ghost" onclick="resetEx5()">â†º Ricomincia</button>
          <button class="btn btn-sec" onclick="toggleSol('sol5box')">Soluzione</button>
        </div>
        <div id="res5" class="result"></div>
        <div id="sol5box" class="sol-box">
          Ordine corretto: <strong>C â†’ A â†’ D â†’ B â†’ E</strong><br>
          C) Prendi la retta r e il punto P su di essa.<br>
          A) Segna A e B su r equidistanti da P.<br>
          D) Traccia un arco con centro A e raggio &gt; AP.<br>
          B) Traccia un arco con centro B con lo stesso raggio: gli archi si incontrano in R e S.<br>
          E) Traccia la retta RS: questa Ã¨ la perpendicolare a r per P.
        </div>
      </div>

    </div>
  </section>

</main>

<footer>Geometria Euclidea Interattiva Â· Â© 2026</footer>

<script>
// â•â• NAV â•â•
const tabs = document.querySelectorAll('#top-menu .tab');
const sections = document.querySelectorAll('main section');

function showSection(id) {
  sections.forEach(s => { s.classList.remove('active'); s.style.display = 'none'; });
  const target = document.getElementById(id);
  target.classList.add('active');
  target.style.display = 'block';
  tabs.forEach(t => t.classList.remove('active'));
  document.querySelector(`button[data-section="${id}"]`).classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

tabs.forEach(t => t.addEventListener('click', () => showSection(t.dataset.section)));
showSection('perp');

// â•â• FULLSCREEN â•â•
const fsBtn = document.getElementById('fullscreen-btn');
function updateFsLabel() {
  const inFs = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);
  fsBtn.textContent = inFs ? 'âœ• Esci schermo intero' : 'â›¶ Schermo intero';
}
fsBtn.addEventListener('click', () => {
  const elem = document.documentElement;
  const inFs = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);
  if (!inFs) {
    const req = elem.requestFullscreen || elem.webkitRequestFullscreen || elem.mozRequestFullScreen || elem.msRequestFullscreen;
    if (req) req.call(elem).catch(() => {});
  } else {
    const ex = document.exitFullscreen || document.webkitExitFullscreen || document.mozCancelFullScreen || document.msExitFullscreen;
    if (ex) ex.call(document).catch(() => {});
  }
});
document.addEventListener('fullscreenchange', updateFsLabel);
document.addEventListener('webkitfullscreenchange', updateFsLabel);
document.addEventListener('mozfullscreenchange', updateFsLabel);
document.addEventListener('MSFullscreenChange', updateFsLabel);

// â•â• ANIMATION HELPER â•â•
const SVG_NS = 'http://www.w3.org/2000/svg';
function mkEl(tag, attrs) {
  const el = document.createElementNS(SVG_NS, tag);
  for (const [k, v] of Object.entries(attrs)) el.setAttribute(k, v);
  return el;
}
const C = s => getComputedStyle(document.documentElement).getPropertyValue(s).trim();

// â•â• PERPENDICOLARE A: punto sulla retta â•â•
const stateA = { step: 0, int: null, playing: false };

function initA() {
  const s = document.getElementById('perpA');
  s.innerHTML = `
    <line x1="30" y1="200" x2="370" y2="200" stroke="#7c6af7" stroke-width="2.5"/>
    <text x="358" y="190" fill="#7c6af7" font-size="15" font-family="DM Mono" font-weight="700">r</text>
    <circle cx="200" cy="200" r="6" fill="#f5c842"/>
    <text x="208" y="194" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">P</text>`;
  document.getElementById('txtA').textContent = '';
}

function stepA() {
  const s = document.getElementById('perpA');
  const t = document.getElementById('txtA');
  const steps = [
    () => { const g = mkEl('g',{}); g.innerHTML = `<circle cx="130" cy="200" r="5" fill="#2dd4a4"/><text x="120" y="222" fill="#2dd4a4" font-size="13" font-family="DM Mono" font-weight="700">A</text><circle cx="270" cy="200" r="5" fill="#2dd4a4"/><text x="266" y="222" fill="#2dd4a4" font-size="13" font-family="DM Mono" font-weight="700">B</text>`; s.appendChild(g); t.textContent = 'Passo 1 â€” Segna A e B equidistanti da P'; },
    () => { s.appendChild(Object.assign(mkEl('circle',{cx:'130',cy:'200',r:'100',fill:'none',stroke:'#f06080','stroke-dasharray':'6,4','stroke-width':'2'}))); t.textContent = 'Passo 2 â€” Arco con centro A'; },
    () => { s.appendChild(Object.assign(mkEl('circle',{cx:'270',cy:'200',r:'100',fill:'none',stroke:'#4fa3f7','stroke-dasharray':'6,4','stroke-width':'2'}))); t.textContent = 'Passo 3 â€” Arco con centro B (stesso raggio)'; },
    () => { const g = mkEl('g',{}); g.innerHTML = `<circle cx="200" cy="113" r="6" fill="#f5c842"/><text x="208" y="108" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">R</text><circle cx="200" cy="287" r="6" fill="#f5c842"/><text x="208" y="305" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">S</text>`; s.appendChild(g); t.textContent = 'Passo 4 â€” Intersezioni R e S'; },
    () => { s.appendChild(Object.assign(mkEl('line',{x1:'200',y1:'50',x2:'200',y2:'330',stroke:'#2dd4a4','stroke-width':'2.5'}))); t.textContent = 'âœ“ Perpendicolare costruita!'; }
  ];
  if (stateA.step < steps.length) { steps[stateA.step](); stateA.step++; }
  else { clearInterval(stateA.int); stateA.playing = false; }
}

document.getElementById('playA').addEventListener('click', () => { if (!stateA.playing) { if (stateA.step===0) initA(); stateA.playing = true; stateA.int = setInterval(stepA, 1300); } });
document.getElementById('pauseA').addEventListener('click', () => { clearInterval(stateA.int); stateA.playing = false; });
document.getElementById('resetA').addEventListener('click', () => { clearInterval(stateA.int); stateA.playing = false; stateA.step = 0; initA(); });
initA();

// â•â• PERPENDICOLARE B: punto esterno â•â•
const stateB = { step: 0, int: null, playing: false };

function initB() {
  const s = document.getElementById('perpB');
  s.innerHTML = `
    <line x1="30" y1="250" x2="370" y2="250" stroke="#7c6af7" stroke-width="2.5"/>
    <text x="358" y="240" fill="#7c6af7" font-size="15" font-family="DM Mono" font-weight="700">r</text>
    <circle cx="200" cy="80" r="6" fill="#f5c842"/>
    <text x="208" y="74" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">P</text>`;
  document.getElementById('txtB').textContent = '';
}

function stepB() {
  const s = document.getElementById('perpB');
  const t = document.getElementById('txtB');
  const rY=250, pX=200, pY=80, R=190;
  const xOff = Math.sqrt(R*R - (rY-pY)*(rY-pY));
  const aX = pX-xOff, bX = pX+xOff;
  const steps = [
    () => { s.appendChild(mkEl('circle',{cx:pX,cy:pY,r:R,fill:'none',stroke:'#f06080','stroke-dasharray':'6,4','stroke-width':'2'})); t.textContent = 'Passo 1 â€” Circonferenza con centro P'; },
    () => { const g = mkEl('g',{}); g.innerHTML = `<circle cx="${aX}" cy="${rY}" r="6" fill="#2dd4a4"/><text x="${aX-16}" y="${rY+20}" fill="#2dd4a4" font-size="13" font-family="DM Mono" font-weight="700">A</text><circle cx="${bX}" cy="${rY}" r="6" fill="#2dd4a4"/><text x="${bX+6}" y="${rY+20}" fill="#2dd4a4" font-size="13" font-family="DM Mono" font-weight="700">B</text>`; s.appendChild(g); t.textContent = 'Passo 2 â€” Intersezioni A e B'; },
    () => { const mX=(aX+bX)/2; const g = mkEl('g',{}); g.innerHTML = `<circle cx="${mX}" cy="${rY}" r="6" fill="#a78bfa"/><text x="${mX+6}" y="${rY+20}" fill="#a78bfa" font-size="13" font-family="DM Mono" font-weight="700">M</text>`; s.appendChild(g); t.textContent = 'Passo 3 â€” Punto medio M di AB'; },
    () => { const mX=(aX+bX)/2; s.appendChild(mkEl('line',{x1:mX,y1:'20',x2:mX,y2:'300',stroke:'#2dd4a4','stroke-width':'2.5'})); t.textContent = 'âœ“ PM Ã¨ la perpendicolare!'; }
  ];
  if (stateB.step < steps.length) { steps[stateB.step](); stateB.step++; }
  else { clearInterval(stateB.int); stateB.playing = false; }
}

document.getElementById('playB').addEventListener('click', () => { if (!stateB.playing) { if (stateB.step===0) initB(); stateB.playing=true; stateB.int=setInterval(stepB,1300); } });
document.getElementById('pauseB').addEventListener('click', () => { clearInterval(stateB.int); stateB.playing=false; });
document.getElementById('resetB').addEventListener('click', () => { clearInterval(stateB.int); stateB.playing=false; stateB.step=0; initB(); });
initB();

// â•â• PARALLELA â•â•
const statePar = { step: 0, int: null, playing: false };

function initPar() {
  const s = document.getElementById('parBuild');
  s.innerHTML = `
    <line x1="30" y1="280" x2="370" y2="280" stroke="#7c6af7" stroke-width="2.5"/>
    <text x="358" y="270" fill="#7c6af7" font-size="15" font-family="DM Mono" font-weight="700">r</text>
    <circle cx="200" cy="80" r="6" fill="#f5c842"/>
    <text x="208" y="74" fill="#f5c842" font-size="13" font-family="DM Mono" font-weight="700">P</text>`;
  document.getElementById('txtPar').textContent = '';
}

function stepPar() {
  const s = document.getElementById('parBuild');
  const t = document.getElementById('txtPar');
  const steps = [
    () => { s.appendChild(mkEl('line',{x1:'200',y1:'30',x2:'200',y2:'320',stroke:'#f06080','stroke-width':'2.5'})); const tx=mkEl('text',{x:'210',y:'50',fill:'#f06080','font-size':'15','font-family':'DM Mono','font-weight':'700'}); tx.textContent='t'; s.appendChild(tx); t.textContent='Passo 1 â€” Traccia t âŸ‚ r per P'; },
    () => { s.appendChild(mkEl('line',{x1:'30',y1:'80',x2:'370',y2:'80',stroke:'#2dd4a4','stroke-width':'2.5'})); const tx=mkEl('text',{x:'358',y:'70',fill:'#2dd4a4','font-size':'15','font-family':'DM Mono','font-weight':'700'}); tx.textContent='s'; s.appendChild(tx); t.textContent='Passo 2 â€” Traccia s âŸ‚ t per P â†’ r âˆ¥ s âœ“'; }
  ];
  if (statePar.step < steps.length) { steps[statePar.step](); statePar.step++; }
  else { clearInterval(statePar.int); statePar.playing=false; }
}

document.getElementById('playPar').addEventListener('click', () => { if (!statePar.playing) { if (statePar.step===0) initPar(); statePar.playing=true; statePar.int=setInterval(stepPar,1300); } });
document.getElementById('pausePar').addEventListener('click', () => { clearInterval(statePar.int); statePar.playing=false; });
document.getElementById('resetPar').addEventListener('click', () => { clearInterval(statePar.int); statePar.playing=false; statePar.step=0; initPar(); });
initPar();

// â•â• TRASVERSALE: angoli â•â•
function resetAngles() {
  for (let i=1; i<=8; i++) {
    document.getElementById('a'+i).setAttribute('stroke-width','0');
    document.getElementById('a'+i).setAttribute('fill','rgba(255,255,255,0.15)');
    document.getElementById('l'+i).setAttribute('opacity','0');
  }
  const intConn = document.getElementById('coniugati-int-connector');
  const extConn = document.getElementById('coniugati-ext-connector');
  if (intConn) intConn.setAttribute('opacity','0');
  if (extConn) extConn.setAttribute('opacity','0');
}
resetAngles();

document.querySelectorAll('.angle').forEach(btn => btn.addEventListener('click', () => {
  resetAngles();
  const pair = btn.dataset.pair.split(',');
  const col = btn.dataset.color;
  const connId = btn.dataset.connector;
  pair.forEach(n => {
    const el = document.getElementById('a'+n);
    el.setAttribute('fill', col.replace(')', ',0.35)').replace('rgb(','rgba(') || col);
    el.setAttribute('fill', col);
    el.setAttribute('stroke', col);
    el.setAttribute('stroke-width', '2.5');
    document.getElementById('l'+n).setAttribute('fill', col);
    document.getElementById('l'+n).setAttribute('opacity', '1');
  });
  // fill with transparency
  pair.forEach(n => {
    const el = document.getElementById('a'+n);
    el.setAttribute('fill', col);
    el.setAttribute('opacity', '0.7');
  });
  if (connId) {
    const conn = document.getElementById(connId);
    if (conn) conn.setAttribute('opacity','1');
  }
}));

document.getElementById('resetAng').addEventListener('click', resetAngles);

// â•â• TRIANGOLI: angolo esterno â•â•
(function() {
  const A={x:80,y:50}, B={x:40,y:150}, C={x:200,y:150};
  function setAttr(id, attrs) {
    const el = document.getElementById(id);
    for (const k in attrs) el.setAttribute(k, attrs[k]);
  }
  setAttr('AB',{x1:A.x,y1:A.y,x2:B.x,y2:B.y});
  setAttr('AC',{x1:A.x,y1:A.y,x2:C.x,y2:C.y});
  setAttr('BC',{x1:B.x,y1:B.y,x2:C.x,y2:C.y});
  const scale=1.2;
  const BCe={x:C.x+(C.x-B.x)*scale, y:C.y+(C.y-B.y)*scale};
  setAttr('BCe',{x1:C.x,y1:C.y,x2:BCe.x,y2:BCe.y});
  setAttr('A',{cx:A.x,cy:A.y}); setAttr('B',{cx:B.x,cy:B.y}); setAttr('C',{cx:C.x,cy:C.y});
  function arc(P,v1,v2,R) {
    const l1=Math.hypot(v1.x,v1.y), l2=Math.hypot(v2.x,v2.y);
    const x1=P.x+R*(v1.x/l1), y1=P.y+R*(v1.y/l1);
    const x2=P.x+R*(v2.x/l2), y2=P.y+R*(v2.y/l2);
    return `M${P.x} ${P.y} L${x1} ${y1} A${R} ${R} 0 0 1 ${x2} ${y2} Z`;
  }
  document.getElementById('alpha').setAttribute('d', arc(A,{x:B.x-A.x,y:B.y-A.y},{x:C.x-A.x,y:C.y-A.y},20));
  document.getElementById('gamma').setAttribute('d', arc(B,{x:A.x-B.x,y:A.y-B.y},{x:C.x-B.x,y:C.y-B.y},20));
  document.getElementById('delta').setAttribute('d', arc(C,{x:A.x-C.x,y:A.y-C.y},{x:BCe.x-C.x,y:BCe.y-C.y},20));
})();

// â•â• TRIANGOLI: somma angoli â•â•
function initSum() {
  const s = document.getElementById('triSum');
  // Triangolo: A=(80,220), B=(320,220), C=(200,60)
  // Angoli calcolati: alpha=53.13Â°, beta=53.13Â°, gamma=73.74Â°
  // Archi precisi: angoli in gradi SVG (y verso il basso)
  s.innerHTML = `
    <polygon points="80,220 320,220 200,60" fill="rgba(124,106,247,0.05)" stroke="#7c6af7" stroke-width="3"/>
    <circle cx="80" cy="220" r="5" fill="#e4e2f0"/>
    <circle cx="320" cy="220" r="5" fill="#e4e2f0"/>
    <circle cx="200" cy="60" r="5" fill="#e4e2f0"/>
    <!-- alpha in A: da râ†’(0Â°) a AC(-53.13Â°) CCW, sweep=0 -->
    <path d="M80,220 L100.0,220.0 A20,20 0 0 0 92.0,204.0 Z" fill="rgba(240,96,128,.4)" stroke="#f06080" stroke-width="2"/>
    <!-- gamma in C: da CA(126.87Â°) a CB(53.13Â°) CCW, sweep=0 -->
    <path d="M200,60 L188.0,76.0 A20,20 0 0 0 212.0,76.0 Z" fill="rgba(124,106,247,.4)" stroke="#7c6af7" stroke-width="2"/>
    <!-- beta in B: da BC(-126.87Â°) a BA(180Â°) CW, sweep=1 -->
    <path d="M320,220 L308.0,204.0 A20,20 0 0 1 300.0,220.0 Z" fill="rgba(45,212,164,.4)" stroke="#2dd4a4" stroke-width="2"/>
    <text x="56" y="242" fill="#f06080" font-size="15" font-family="DM Mono" font-weight="700">Î±</text>
    <text x="306" y="242" fill="#2dd4a4" font-size="15" font-family="DM Mono" font-weight="700">Î²</text>
    <text x="194" y="50" fill="#7c6af7" font-size="15" font-family="DM Mono" font-weight="700">Î³</text>
    <text x="67" y="215" fill="#e4e2f0" font-size="12" font-family="DM Mono">A</text>
    <text x="324" y="215" fill="#e4e2f0" font-size="12" font-family="DM Mono">B</text>
    <text x="204" y="58" fill="#e4e2f0" font-size="12" font-family="DM Mono">C</text>`;
}

function sectorPath(cx, cy, r, startDeg, endDeg) {
  const toRad = a => a * Math.PI / 180;
  const x1=cx+r*Math.cos(toRad(startDeg)), y1=cy+r*Math.sin(toRad(startDeg));
  const x2=cx+r*Math.cos(toRad(endDeg)), y2=cy+r*Math.sin(toRad(endDeg));
  const la = Math.abs(endDeg-startDeg)>180?1:0;
  const sw = endDeg>startDeg?1:0;
  return `M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 ${la} ${sw} ${x2} ${y2} Z`;
}

document.getElementById('showSum').addEventListener('click', () => {
  const s = document.getElementById('triSum');
  const yPar = 60, cx = 200;
  // Retta parallela ad AB passante per C=(200,60)
  const line = mkEl('line',{x1:'30',y1:yPar,x2:'370',y2:yPar,stroke:'#f5c842','stroke-width':'2','stroke-dasharray':'6,4'});
  s.appendChild(line);
  const parLabel = mkEl('text',{x:'34',y:String(yPar-6),fill:'#f5c842','font-size':'11','font-family':'DM Mono','font-weight':'700'});
  parLabel.textContent = 'p âˆ¥ AB'; s.appendChild(parLabel);

  // Angoli SOTTO la retta parallela (tra p e AB, dove sta il triangolo):
  // Direzione CA verso A=(80,220): angolo SVG = 126.87Â° (basso-sx)
  // Direzione CB verso B=(320,220): angolo SVG = 53.13Â° (basso-dx)
  // alpha' = settore tra CA(126.87Â°) e r_left(180Â°): ampiezza 53.13Â°, CW (sweep=1)
  // beta'  = settore tra r_right(0Â°) e CB(53.13Â°):  ampiezza 53.13Â°, CW (sweep=1)
  // gamma  = settore tra CA(126.87Â°) e CB(53.13Â°):  ampiezza 73.74Â°, CCW (sweep=0)

  const aPrime = mkEl('path',{
    d:'M200,60 L188.0,76.0 A20,20 0 0 1 180.0,60.0 Z',
    fill:'rgba(240,96,128,.45)',stroke:'#f06080','stroke-width':'2'});
  s.appendChild(aPrime);

  const gammaP = mkEl('path',{
    d:'M200,60 L188.0,76.0 A20,20 0 0 0 212.0,76.0 Z',
    fill:'rgba(124,106,247,.5)',stroke:'#7c6af7','stroke-width':'2.5'});
  s.appendChild(gammaP);

  const bPrime = mkEl('path',{
    d:'M200,60 L220.0,60.0 A20,20 0 0 1 212.0,76.0 Z',
    fill:'rgba(45,212,164,.45)',stroke:'#2dd4a4','stroke-width':'2'});
  s.appendChild(bPrime);

  function mkLabel(txt, x, y, color) {
    const t = mkEl('text',{x,y,fill:color,'font-size':'14','font-family':'DM Mono','font-weight':'700'});
    t.textContent = txt; s.appendChild(t);
  }
  // Etichette SOTTO la retta (y > 60)
  mkLabel('Î±â€²', 153, 83, '#f06080');
  mkLabel('Î³',  194, 92, '#7c6af7');
  mkLabel('Î²â€²', 222, 83, '#2dd4a4');

  // Linee tratteggiate alterni interni (alphaâ†”alpha', betaâ†”beta')
  const arrA = mkEl('line',{x1:'92',y1:'204',x2:'184',y2:'72',
    stroke:'#f06080','stroke-width':'1.3','stroke-dasharray':'5,3','opacity':'0.7'});
  s.appendChild(arrA);
  const arrB = mkEl('line',{x1:'308',y1:'204',x2:'216',y2:'72',
    stroke:'#2dd4a4','stroke-width':'1.3','stroke-dasharray':'5,3','opacity':'0.7'});
  s.appendChild(arrB);

  // Equazione finale
  const eq = mkEl('text',{x:'70',y:'266',fill:'#e4e2f0','font-size':'14','font-family':'DM Mono','font-weight':'700'});
  eq.textContent = 'Î± + Î² + Î³ = 180Â°'; s.appendChild(eq);
});

document.getElementById('resetSum').addEventListener('click', initSum);
initSum();

// â•â• LAA â•â•
const HL = '#f97316';
function hiLAA(on=true) {
  ['laaA-AB','laaB-AB'].forEach(id => document.getElementById(id).setAttribute('stroke', on ? HL : '#fbbf24'));
  ['laaA-angA','laaB-angA'].forEach(id => document.getElementById(id).setAttribute('stroke', on ? HL : '#f06080'));
  ['laaA-angC','laaB-angC'].forEach(id => document.getElementById(id).setAttribute('stroke', on ? HL : '#2dd4a4'));
}

document.getElementById('chkLAA').addEventListener('click', () => {
  hiLAA(true);
  document.getElementById('outLAA').innerHTML = 'âœ“ <b>Lato</b> AB â‰… Aâ€²Bâ€², <b>angolo adiacente</b> âˆ A â‰… âˆ Aâ€², e <b>angolo opposto</b> âˆ C â‰… âˆ Câ€² â†’ <b>triangoli congruenti</b>.';
  document.getElementById('outLAA').style.color = 'var(--sec)';
});

document.getElementById('rstLAA').addEventListener('click', () => {
  hiLAA(false);
  document.getElementById('outLAA').textContent = '';
});

// â•â• ESERCIZI JS â•â•
let scores = [false, false, false, false, false];

function updateScore() {
  const total = scores.filter(Boolean).length;
  document.getElementById('score-label').textContent = total + ' / 5';
  document.getElementById('score-bar').style.width = (total / 5 * 100) + '%';
}

function toggleSol(id) {
  const b = document.getElementById(id);
  b.style.display = (b.style.display === 'block') ? 'none' : 'block';
}

// â”€â”€ EX 1: calcola angoli â”€â”€
function checkEx1() {
  const a = parseInt(document.getElementById('ans1a').value);
  const b = parseInt(document.getElementById('ans1b').value);
  const res = document.getElementById('res1');
  if (a === 115 && b === 65) {
    res.textContent = 'âœ“ Perfetto! Î² = 115Â° (supplementare) e Î³ = 65Â° (alterni interni).';
    res.className = 'result ok';
    scores[0] = true;
  } else {
    let msg = 'âœ— Riprova. ';
    if (a !== 115) msg += 'Î² non Ã¨ corretto (ricorda: angoli supplementari sommano a 180Â°). ';
    if (b !== 65) msg += 'Î³ non Ã¨ corretto (alterni interni: sono uguali ad Î±).';
    res.textContent = msg;
    res.className = 'result err';
  }
  updateScore();
}

// â”€â”€ EX 2: vero/falso â”€â”€
const tfData = [
  { q: 'Due rette perpendicolari si incontrano formando quattro angoli retti.', ans: true },
  { q: 'Due rette parallele si incontrano in un punto all\'infinito.', ans: false },
  { q: 'Gli angoli alterni interni sono congruenti quando le rette sono parallele.', ans: true },
  { q: 'La somma degli angoli interni di un triangolo Ã¨ 360Â°.', ans: false },
  { q: 'Per il V postulato di Euclide, per un punto esterno passa una sola parallela.', ans: true },
];

(function buildTF() {
  const container = document.getElementById('tf-questions');
  tfData.forEach((item, i) => {
    const div = document.createElement('div');
    div.style.cssText = 'display:flex; align-items:flex-start; gap:0.6rem; background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:0.7rem 0.9rem;';
    div.innerHTML = `
      <span style="flex:1; font-size:0.87rem; line-height:1.5;">${item.q}</span>
      <div style="display:flex; gap:0.4rem; flex-shrink:0; margin-top:0.1rem;">
        <label style="cursor:pointer;">
          <input type="radio" name="tf${i}" value="true" style="accent-color:var(--sec);"> <span style="font-size:0.82rem; font-weight:700; color:var(--sec);">V</span>
        </label>
        <label style="cursor:pointer; margin-left:0.3rem;">
          <input type="radio" name="tf${i}" value="false" style="accent-color:var(--red);"> <span style="font-size:0.82rem; font-weight:700; color:var(--red);">F</span>
        </label>
      </div>`;
    container.appendChild(div);
  });
})();

function checkEx2() {
  let correct = 0;
  tfData.forEach((item, i) => {
    const sel = document.querySelector(`input[name="tf${i}"]:checked`);
    if (sel && (sel.value === 'true') === item.ans) correct++;
  });
  const res = document.getElementById('res2');
  if (correct === tfData.length) {
    res.textContent = 'âœ“ Perfetto! Tutte le risposte sono corrette.';
    res.className = 'result ok';
    scores[1] = true;
  } else {
    res.textContent = `âœ— ${correct} su ${tfData.length} corrette. Ricontrolla le definizioni!`;
    res.className = 'result err';
  }
  updateScore();
}

// â”€â”€ EX 3: terzo angolo del triangolo â”€â”€
function checkEx3() {
  const v = parseInt(document.getElementById('ans3').value);
  const res = document.getElementById('res3');
  if (v === 95) {
    res.textContent = 'âœ“ Esatto! 180Â° âˆ’ 40Â° âˆ’ 45Â° = 95Â°.';
    res.className = 'result ok';
    scores[2] = true;
  } else {
    res.textContent = 'âœ— Non corretto. Ricorda: A + B + C = 180Â°, quindi C = 180Â° âˆ’ A âˆ’ B.';
    res.className = 'result err';
  }
  updateScore();
}

// â”€â”€ EX 4: abbinamento â”€â”€
const matchDefs = [
  { def: 'Si incontrano formando quattro angoli retti.', ans: 'Rette perpendicolari' },
  { def: 'Non hanno punti in comune (oppure coincidono).', ans: 'Rette parallele' },
  { def: 'Retta che taglia altre due rette in due punti distinti.', ans: 'Trasversale' },
  { def: 'Angoli su lati opposti della trasversale, tra le due rette, congruenti se le rette sono parallele.', ans: 'Alterni interni' },
  { def: 'Per un punto esterno a una retta passa una e una sola retta parallela.', ans: 'V postulato' },
];
const matchOpts = ['Rette perpendicolari','Rette parallele','Trasversale','Alterni interni','V postulato'];

(function buildMatch() {
  const container = document.getElementById('match-area');
  matchDefs.forEach((item, i) => {
    const div = document.createElement('div');
    div.style.cssText = 'display:flex; align-items:center; gap:0.6rem; flex-wrap:wrap; background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:0.6rem 0.9rem;';
    const shuffled = [...matchOpts].sort(() => Math.random() - 0.5);
    div.innerHTML = `
      <span style="flex:1; min-width:140px; font-size:0.85rem; line-height:1.4;">${item.def}</span>
      <select id="match${i}" style="background:var(--surface2); border:1.5px solid var(--border); border-radius:8px; padding:0.35rem 0.5rem; color:var(--text); font-family:'Plus Jakarta Sans'; font-size:0.82rem; outline:none; cursor:pointer;">
        <option value="">â€” scegli â€”</option>
        ${shuffled.map(o => `<option value="${o}">${o}</option>`).join('')}
      </select>`;
    container.appendChild(div);
  });
})();

function checkEx4() {
  let correct = 0;
  matchDefs.forEach((item, i) => {
    const sel = document.getElementById('match' + i);
    if (sel && sel.value === item.ans) correct++;
  });
  const res = document.getElementById('res4');
  if (correct === matchDefs.length) {
    res.textContent = 'âœ“ Perfetto! Tutti gli abbinamenti sono corretti.';
    res.className = 'result ok';
    scores[3] = true;
  } else {
    res.textContent = `âœ— ${correct} su ${matchDefs.length} corretti. Ricontrolla le definizioni!`;
    res.className = 'result err';
  }
  updateScore();
}

// â”€â”€ EX 5: ordina i passi â”€â”€
const orderSteps = [
  { id: 'A', text: 'Segna due punti A e B su r equidistanti da P.' },
  { id: 'B', text: 'Traccia un arco con centro B con lo stesso raggio: gli archi si incontrano in R e S.' },
  { id: 'C', text: 'Considera la retta r e il punto P su di essa.' },
  { id: 'D', text: 'Traccia un arco con centro A e raggio maggiore di AP.' },
  { id: 'E', text: 'Traccia la retta RS: Ã¨ la perpendicolare a r passante per P.' },
];
const correctOrder = ['C','A','D','B','E'];
let chosenOrder = [];

function buildOrderSteps() {
  const container = document.getElementById('order-steps');
  container.innerHTML = '';
  const shuffled = [...orderSteps].sort(() => Math.random() - 0.5);
  shuffled.forEach(step => {
    const btn = document.createElement('button');
    btn.id = 'step-btn-' + step.id;
    btn.className = 'btn-angle';
    btn.style.cssText = 'text-align:left; padding:0.55rem 1rem; border-radius:10px; cursor:pointer; transition:all 0.2s;';
    btn.innerHTML = `<span style="font-family:'DM Mono'; color:var(--pri); font-weight:700; margin-right:0.5rem;">${step.id}</span>${step.text}`;
    btn.addEventListener('click', () => selectStep(step.id, btn));
    container.appendChild(btn);
  });
  chosenOrder = [];
  document.getElementById('seq-display').textContent = 'â€”';
  document.getElementById('res5').textContent = '';
}

function selectStep(id, btn) {
  if (chosenOrder.includes(id)) return;
  chosenOrder.push(id);
  btn.style.background = 'rgba(124,106,247,0.2)';
  btn.style.borderColor = 'var(--pri)';
  btn.style.color = '#fff';
  btn.disabled = true;
  document.getElementById('seq-display').textContent = chosenOrder.join(' â†’ ');
}

function resetEx5() {
  buildOrderSteps();
}

function checkEx5() {
  const res = document.getElementById('res5');
  if (chosenOrder.length < 5) {
    res.textContent = 'âš  Seleziona tutti e 5 i passi prima di verificare.';
    res.className = 'result err';
    return;
  }
  if (chosenOrder.join('') === correctOrder.join('')) {
    res.textContent = 'âœ“ Ordine corretto! Ottimo ragionamento.';
    res.className = 'result ok';
    scores[4] = true;
  } else {
    res.textContent = 'âœ— L\'ordine non Ã¨ corretto. Rileggi i passi e riprova.';
    res.className = 'result err';
  }
  updateScore();
}

buildOrderSteps();

// Precise LAA angles (from original)
const normPI = a => {
  while (a <= -Math.PI) a += 2*Math.PI;
  while (a > Math.PI) a -= 2*Math.PI;
  return a;
};
function sectorPathFromPoints(P, Q, R, r) {
  const a1=Math.atan2(P.y-Q.y,P.x-Q.x), a2=Math.atan2(R.y-Q.y,R.x-Q.x);
  let da=normPI(a2-a1);
  let start=a1, end=a1+Math.abs(da);
  if (da<0) { start=a2; end=a2+Math.abs(da); }
  const x1=Q.x+r*Math.cos(start), y1=Q.y+r*Math.sin(start);
  const x2=Q.x+r*Math.cos(end), y2=Q.y+r*Math.sin(end);
  const la=(Math.abs(da)>Math.PI)?1:0;
  return `M ${Q.x} ${Q.y} L ${x1} ${y1} A ${r} ${r} 0 ${la} 1 ${x2} ${y2} Z`;
}
function readTrianglePoints(svgId) {
  const poly = document.querySelector(`#${svgId} polygon`);
  return poly.getAttribute('points').trim().split(/\s+/).map(s => {
    const [x,y]=s.split(',').map(Number); return {x,y};
  });
}
function safeRadius(vertex, adj1, adj2, k=0.18, rMin=14, rMax=28) {
  const d1=Math.hypot(adj1.x-vertex.x,adj1.y-vertex.y);
  const d2=Math.hypot(adj2.x-vertex.x,adj2.y-vertex.y);
  return Math.max(rMin, Math.min(rMax, Math.min(d1,d2)*k));
}
function drawPreciseAngles_LAA() {
  try {
    const [A,B,C] = readTrianglePoints('laaA');
    const rA=safeRadius(A,B,C), rC=safeRadius(C,A,B);
    document.getElementById('laaA-angA').setAttribute('d', sectorPathFromPoints(B,A,C,rA));
    document.getElementById('laaA-angC').setAttribute('d', sectorPathFromPoints(A,C,B,rC));
    const [Apr,Bpr,Cpr] = readTrianglePoints('laaB');
    const rApr=safeRadius(Apr,Bpr,Cpr), rCpr=safeRadius(Cpr,Apr,Bpr);
    document.getElementById('laaB-angA').setAttribute('d', sectorPathFromPoints(Bpr,Apr,Cpr,rApr));
    document.getElementById('laaB-angC').setAttribute('d', sectorPathFromPoints(Apr,Cpr,Bpr,rCpr));
  } catch(e) {}
}
drawPreciseAngles_LAA();
document.querySelector('button[data-section="triangoli"]')?.addEventListener('click', drawPreciseAngles_LAA);
</script>

 
</body>
</html>
